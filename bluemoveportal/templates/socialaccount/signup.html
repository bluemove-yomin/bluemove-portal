{% extends 'base.html' %}

{% load static socialaccount i18n %}

{% block meta %}
<meta property="og:url" content="{% url 'account_login' %}">
<meta property="og:title" content="ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ê°œì¸ì •ë³´ ë“±ë¡">
<meta property="og:description" content="ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ê°œì¸ì •ë³´ ë“±ë¡">
<meta name="subject" content="ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ê°œì¸ì •ë³´ ë“±ë¡">
<meta name="description" content="ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ê°œì¸ì •ë³´ ë“±ë¡">
<meta name="robots" content="noindex,nofollow">
{% endblock %}

{% block title %} ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ê°œì¸ì •ë³´ ë“±ë¡ {% endblock %}

{% block breadcrumb %}
<div class="breadcrumb-screen breadcrumb-base breadcrumb-account">
    <div class="d-flex align-items-center breadcrumb-layer">
        <div class="container-lg text-center">
            <h1 class="screenLarge m-0" style="color: #FFFFFF; text-shadow: 1px 1px 5px #212529;">ê°œì¸ì •ë³´ ë“±ë¡</h1>
            <h2 class="screenSmall m-0" style="color: #FFFFFF; text-shadow: 1px 1px 5px #212529;">ê°œì¸ì •ë³´ ë“±ë¡</h2>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="card shadow-hover">
    <div class="card-body" style="background-color: rgba(0,0,0,.025);">
        <h5 class="card-title pb-1">ê°œì¸ì •ë³´ ë“±ë¡
            <a href="#none" class="ms-1" data-bs-toggle="tooltip" data-bs-placement="right" title=""
                data-bs-original-title="ì´ ê³¼ì •ì€ ì²« ë¡œê·¸ì¸ ì‹œì—ë§Œ ì§„í–‰ë©ë‹ˆë‹¤." style="color: #545859 !important;" aria-label="ë„ì›€ë§">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-question-circle" viewBox="0 0 16 16" style="margin-bottom: .2rem;">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                    <path
                        d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z" />
                </svg>
            </a>
        </h5>
        <form action="{% url 'socialaccount_signup' %}" method="POST" enctype="multipart/form-data" class="signup"
            id="signupForm" onsubmit="phoneNumValidation()">
            {% csrf_token %}
            <div class="alert alert-primary" role="alert">
                <h5>ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš© ë™ì˜</h5>
                <p>ë³¸ì¸ì€ ê°œì¸ì •ë³´ë³´í˜¸ë²•ì— ì˜ê±°í•˜ì—¬ íŒŒë€ë¬¼ê²° ë¸”ë£¨ë¬´ë¸Œê°€ ë³¸ì¸ì˜ ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ ì„œë¹„ìŠ¤ ì´ìš©ê³¼ ê´€ë ¨í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ê°œì¸ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê³  ì´ìš©í•˜ëŠ” ê²ƒì— ë™ì˜í•©ë‹ˆë‹¤.</p>
                <ol style="padding-left: 18px;">
                    <li>ìˆ˜ì§‘ ë° ì´ìš© ëª©ì </li>
                    <ul style="padding-left: 20px;">
                        <li>ì‚¬ìš©ì ê´€ë¦¬: ë³¸ì¸ í™•ì¸ ë° ê°œì¸ ì‹ë³„, ê°€ì…ì§€ì›ì ê´€ë¦¬, ë¯¼ì› ì²˜ë¦¬ ë° ê³ ì§€ ì‚¬í•­ ì „ë‹¬ ë“±</li>
                        <li>ì„œë¹„ìŠ¤ ì œê³µ: ì „ìë¬¸ì„œ ìƒì„±Â·ì œì¶œÂ·ìŠ¹ì¸ ì²˜ë¦¬, ë¸”ë£¨ë¬´ë²„ ëŒ€ìƒ ì—…ë¬´ í¸ì˜ ê¸°ëŠ¥ ë“±</li>
                    </ul>
                    <li>ìˆ˜ì§‘ í•­ëª©</li>
                    <ul style="padding-left: 20px;">
                        <li>Google ê³„ì • ì´ë©”ì¼ ì£¼ì†Œ, Google ê³„ì • í”„ë¡œí•„ ì‚¬ì§„, ì„±ëª…, íœ´ëŒ€ì „í™” ë²ˆí˜¸</li>
                    </ul>
                    <li>ë³´ìœ  ë° ì´ìš© ê¸°ê°„</li>
                    <ul style="padding-left: 20px;">
                        <li>ì¼ë°˜ ì‚¬ìš©ì: ì´ìš© ëª©ì  ë‹¬ì„± í›„ ì¦‰ì‹œ íŒŒê¸°</li>
                        <li>ë¸”ë£¨ë¬´ë²„(í™œë™ íšŒì›): í™œë™ ê¸°ê°„ ì¢…ë£Œ ì‹œ íŒŒê¸°</li>
                        <li>ëª¨ë“  ì‚¬ìš©ì: 30ì¼ ê°„ ë¹„í™œì„± ì‹œ ì¦‰ì‹œ íŒŒê¸°</li>
                    </ul>
                    <li>ë™ì˜ ê±°ë¶€ ì‹œ ë¶ˆì´ìµ</li>
                    <ul style="padding-left: 20px;">
                        <li>ë³¸ì¸ì€ ìƒê¸° ê°œì¸ì •ë³´ì˜ ìˆ˜ì§‘ ë° ì´ìš©ì— ê±°ë¶€í•  ê¶Œë¦¬ë¥¼ ë³´ìœ í•˜ê³  ìˆìœ¼ë©°, ë™ì˜ë¥¼ ê±°ë¶€í•  ê²½ìš° ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ ì„œë¹„ìŠ¤ ì´ìš©ì´ ë¶ˆê°€í•¨ì„ ì¸ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤.</li>
                    </ul>
                </ol>
                <div class="d-flex justify-content-end">
                    <div class="form-check d-flex align-items-center">
                        <input class="form-check-input phone-num-validation" type="checkbox" value="unchecked"
                            id="agreementCheckbox" onclick="agreementCheck(this)" required>
                        <label class="form-check-label ms-2" for="agreementCheckbox">
                            ìœ„ ë‚´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤.
                        </label>
                    </div>
                </div>
            </div>
            <div style="margin-bottom: 1rem;">
                <label for="id_email" class="form-label">ì´ë©”ì¼ ì£¼ì†Œ
                    <a href="#none" class="ms-1" data-bs-toggle="tooltip" data-bs-placement="right" title=""
                        data-bs-original-title="ì´ë©”ì¼ ì£¼ì†ŒëŠ” ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤." style="color: #545859 !important;"
                        aria-label="ë„ì›€ë§">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-question-circle" viewBox="0 0 16 16" style="margin-bottom: .2rem;">
                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                            <path
                                d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z" />
                        </svg>
                    </a>
                </label>
                {{ form.email }}
            </div>
            <div class="row row-cols-1 row-cols-md-2 g-3">
                <div class="col">
                    <div class="d-flex justify-content-start">
                        <label for="id_last_name" class="form-label">ì„±</label><label for="id_first_name"
                            class="form-label">ëª…</label>
                    </div>
                    <div class="input-group">
                        {{ form.last_name }}
                        {{ form.first_name }}
                    </div>
                </div>
                <div class="col">
                    <label for="id_phone" class="form-label">íœ´ëŒ€ì „í™” ë²ˆí˜¸</label>
                    {{ form.phone }}
                </div>
            </div>
            <div id="phoneNumVCodeDiv" style="margin-top: 1rem;" hidden>
                <div class="screenLarge">
                    <div class="d-flex justify-content-between">
                        <label for="id_v_code" class="form-label">ì¸ì¦ ë²ˆí˜¸</label>
                        <small style="margin-top: .125rem;"><i class="bi bi-clock me-1"></i><span
                                class="willExpireOnSpan"></span></small>
                    </div>
                </div>
                <div class="screenSmall">
                    <label for="id_v_code" class="form-label">ì¸ì¦ ë²ˆí˜¸</label>
                    <small class="d-flex justify-content-center border border-secondary rounded-1 mb-3"
                        style="border-color: rgba(0,0,0,.3) !important;">
                        <i class="bi bi-clock me-1"></i><span class="willExpireOnSpan"></span></small>
                </div>
                <div class="input-group">
                    {{ form.v_code }}
                    <span class="input-group-text" id="phoneNumVCodeInfo">ì „ì†¡ ì™„ë£Œ</span>
                </div>
            </div>
            <div class="d-grid" style="padding-top: 1.25rem !important;">
                <button type="button" class="btn btn-outline-secondary" id="phoneNumVCodeBtn" aria-label="ì¸ì¦ ë²ˆí˜¸ ì „ì†¡">
                    <i class="bi bi-envelope me-2"></i>ì¸ì¦ ë²ˆí˜¸ ì „ì†¡</button>
                <button type="button" class="btn btn-outline-secondary" id="phoneNumVCodeCheckBtn" aria-label="ì¸ì¦ ë²ˆí˜¸ í™•ì¸"
                    hidden disabled>
                    <i class="bi bi-check2 me-2"></i>ì¸ì¦ ë²ˆí˜¸ í™•ì¸</button>
                <button type="button" class="btn btn-outline-secondary" id="resetBtn" aria-label="ì´ˆê¸°í™”" onclick="init()"
                    hidden disabled>
                    <i class="bi bi-bootstrap-reboot me-2"></i>ì´ˆê¸°í™”</button>
            </div>
        </form>
    </div>
</div>

<script type="text/javascript">
    // confirmation of consent to the collection and use of personal information
    function agreementCheck() {
        var agreementCheckbox = document.querySelector("#agreementCheckbox");
        if (agreementCheckbox.value == "unchecked") {
            agreementCheckbox.value = "checked";
            agreementCheckbox.setAttribute("checked", "");
        } else {
            agreementCheckbox.value = "unchecked";
            agreementCheckbox.removeAttribute("checked");
        }
    }
    // validation
    var patternNum = /[0-9]/; // number
    var patternSpc = /[ \[\]{}()<>?|`~!@#$%^&*-_+=,.;:\"\'\\]/; // special characters
    var patternSpcWithoutDash = /[ \[\]{}()<>?|`~!@#$%^&*_+=,.;:\"\'\\]/; // special characters without dash
    var patternEng = /[a-zA-Z]/; // alphabet
    var patternKor = /[ã„±-ã…|ã…-ã…£|ê°€-í£]/; // Hangul
    var patternEml = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/ // email
    $("#id_last_name").keyup(function () {
        var foo = $(this).val().replace(/[a-z0-9]|[ \[\]{}()<>?|`~!@#$%^&*-_+=,.;:\"\'\\]/g, "");
        $(this).val(foo);
    });
    $("#id_first_name").keyup(function () {
        var foo = $(this).val().replace(/[a-z0-9]|[ \[\]{}()<>?|`~!@#$%^&*-_+=,.;:\"\'\\]/g, "");
        $(this).val(foo);
    });
    $("#id_phone").keyup(function () {
        var foo = $(this).val().replace(/[^0-9]/g, "").replace(/(^0[0-9]{2})([0-9]+)?([0-9]{4})$/, "$1-$2-$3").replace("--", "-");
        $(this).val(foo);
    });
    function onlyNumbers(e) {
        var regInt = /[^0-9]/gi;
        var inputKeyChar = String.fromCharCode(event.keyCode);
        if (regInt.test(inputKeyChar)) {
            event.returnValue = false;
        }
    }
    function validation() {
        if (agreementCheckbox.value !== "checked") {
            agreementCheckbox.focus();
            alert("ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš©ì— ë™ì˜í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (id_last_name.value == "") {
            id_last_name.focus();
            alert("ì„±ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        };
        if (!patternKor.test(id_last_name.value)) {
            id_last_name.focus();
            alert("ì„±ì€ í•œê¸€ë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        };
        if (id_first_name.value == "") {
            id_first_name.focus();
            alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        };
        if (!patternKor.test(id_first_name.value)) {
            id_first_name.focus();
            alert("ì´ë¦„ì€ í•œê¸€ë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        };
        if (id_phone.value.length !== 13) {
            id_phone.focus();
            alert("íœ´ëŒ€ì „í™” ë²ˆí˜¸ëŠ” '010'ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ìˆ«ì 11ìë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        };
        if (!patternNum.test(id_phone.value)) {
            id_phone.focus();
            alert("íœ´ëŒ€ì „í™” ë²ˆí˜¸ëŠ” ìˆ«ìë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        };
        if (id_phone.value.indexOf("010") !== 0) {
            id_phone.focus();
            alert("íœ´ëŒ€ì „í™” ë²ˆí˜¸ëŠ” '010'ìœ¼ë¡œ ì‹œì‘í•´ì•¼ í•©ë‹ˆë‹¤.");
            return false;
        };
        if (id_phone.value.indexOf("-") !== 3 &&
            id_phone.value.lastIndexOf("-") !== 8) {
            id_phone.focus();
            alert("ì˜¬ë°”ë¥¸ íœ´ëŒ€ì „í™” ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        };
        if (id_phone.value.match(/-/g).length !== 2) {
            id_phone.focus();
            alert("ì˜¬ë°”ë¥¸ íœ´ëŒ€ì „í™” ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        };
        if (!patternNum.test(id_last_name.value) &&
            !patternSpc.test(id_last_name.value) &&
            !patternEng.test(id_last_name.value) &&
            patternKor.test(id_last_name.value) &&
            !patternNum.test(id_first_name.value) &&
            !patternSpc.test(id_first_name.value) &&
            !patternEng.test(id_first_name.value) &&
            patternKor.test(id_first_name.value) &&
            patternNum.test(id_phone.value) &&
            !patternSpcWithoutDash.test(id_phone.value) &&
            !patternEng.test(id_phone.value) &&
            !patternKor.test(id_phone.value) &&
            id_phone.value.indexOf("010") == 0 &&
            id_phone.value.indexOf("-") == 3 &&
            id_phone.value.match(/-/g).length == 2) {
            return true;
        } else {
            alert("ì˜ëª»ëœ ê°’ì´ ìˆìŠµë‹ˆë‹¤.\nì˜¬ë°”ë¥¸ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        };
    };
    // phone number validation
    function objectToJson(object) {
        const object_to_string = JSON.stringify(object);
        const string_to_json = JSON.parse(object_to_string);
        return string_to_json;
    }
    function phoneNumValidation() {
        lastName = $("#id_last_name").val();
        firstName = $("#id_first_name").val();
        phoneNum = $("#id_phone").val();
        vCodeInputValue = $("#id_v_code").val();
        err_msg = "ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\nì˜¤ë¥˜ê°€ ë°˜ë³µë  ê²½ìš° ì‚¬ë¬´êµ­ì— ë¬¸ì˜í•´ì£¼ì„¸ìš”.\n\nâ˜ï¸ 02-3296-0613\nğŸ“§ management@bluemove.or.kr"
        if (phoneNumVCodeDiv.hidden == false) {
            if (phoneNumVCodeValidation() == true) {
                $.ajax({
                    type: "POST",
                    url: "/member/phone-num-validation",
                    data: JSON.stringify(lastName + "#" + phoneNum + "#" + vCodeInputValue),
                    success: function (object) {
                        const status = objectToJson(object).status;
                        if (status == "passed") {
                            id_v_code.readOnly = true;
                            phoneNumVCodeCheckBtn.disabled = true;
                            phoneNumVCodeInfo.innerText = "ì¸ì¦ ì„±ê³µ"
                            phoneNumVCodeInfo.setAttribute("style", "background: #0077C8; border-color: #0077C8; color: #FFFFFF;");
                            // call 'spinner (transition)' function
                            fadeOut();
                            // call 'avoiding duplicate requests (btn disabled)' function
                            setTimeout(inProgress, 0);
                            document.querySelector("form").submit();
                        } else {
                            phoneNumVCodeInfo.innerText = "ì¸ì¦ ì‹¤íŒ¨"
                            phoneNumVCodeInfo.setAttribute("style", "background: #ffc107; border-color: #ffc107;")
                            id_v_code.focus();
                            alert("ì˜¬ë°”ë¥¸ ì¸ì¦ ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                        }
                    },
                    error: function (xhr, errmsg, err) {
                        // console.log(xhr.status + ": " + xhr.responseText);
                        alert(err_msg);
                    }
                });
            } else {
                return false;
            }
        } else if (validation() == true) {
            if (confirm("ì˜¬ë°”ë¥¸ ì •ë³´ì¸ì§€ ìµœì¢… í™•ì¸í•´ì£¼ì„¸ìš”.\nğŸ™‹ ì„±ëª…: " + lastName + firstName + "\nğŸ“± íœ´ëŒ€ì „í™” ë²ˆí˜¸: " + phoneNum + "\n\nìœ„ íœ´ëŒ€ì „í™” ë²ˆí˜¸ë¡œ ì¸ì¦ ë²ˆí˜¸ë¥¼ ì „ì†¡í•˜ì‹œê² ì–´ìš”?")) {
                $.ajax({
                    type: "POST",
                    url: "/member/phone-num-validation",
                    data: JSON.stringify(lastName + "$" + phoneNum),
                    success: function (object) {
                        const status = objectToJson(object).status;
                        if (status == "generated") {
                            const expDatetime = objectToJson(object).expDatetime;
                            agreementCheckbox.disabled = true;
                            id_last_name.readOnly = true;
                            id_first_name.readOnly = true;
                            id_phone.readOnly = true;
                            phoneNumVCodeDiv.hidden = false;
                            id_v_code.required = true;
                            phoneNumVCodeBtn.hidden = true;
                            phoneNumVCodeBtn.disabled = true;
                            phoneNumVCodeCheckBtn.hidden = false;
                            phoneNumVCodeCheckBtn.disabled = false;
                            timeRemaining(expDatetime);
                        } else {
                            alert("STATUS CODE: " + status + "\n\n" + err_msg);
                        }
                    },
                    error: function (xhr, errmsg, err) {
                        // console.log(xhr.status + ": " + xhr.responseText);
                        alert(err_msg);
                    }
                });
            }
        } else {
            return false;
        }
    }
    $("#id_v_code").keyup(function () {
        var foo = $(this).val().replace(/[^0-9]/g, "");
        $(this).val(foo);
    });
    function phoneNumVCodeValidation() {
        vCodeInputValue = $("#id_v_code").val();
        if (vCodeInputValue == "") {
            alert("ì¸ì¦ ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (vCodeInputValue.length !== 6) {
            alert("ì˜¬ë°”ë¥¸ ì¸ì¦ ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (!patternNum.test(vCodeInputValue)) {
            alert("ì¸ì¦ ë²ˆí˜¸ëŠ” ìˆ«ìë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (vCodeInputValue !== "" &&
            vCodeInputValue.length == 6 &&
            patternNum.test(vCodeInputValue)) {
            return true;
        } else {
            alert("ì˜¬ë°”ë¥¸ ì¸ì¦ ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
    };
    document.querySelectorAll(".phone-num-validation").forEach(item => {
        item.addEventListener("keyup", event => {
            if (event.keyCode === 13) {
                phoneNumValidation();
            }
        })
    })
    $("#phoneNumVCodeBtn").on("click", function () {
        phoneNumValidation();
    });
    $("#phoneNumVCodeCheckBtn").on("click", function () {
        phoneNumValidation();
    });
    // time remaining until v code expires
    function timeRemaining(expDatetime) {
        const expDate = expDatetime.split("T")[0];
        const expTime = expDatetime.split("T")[1];
        var expYear = expDate.split("-")[0];
        var expMonth = expDate.split("-")[1];
        var expDay = expDate.split("-")[2];
        var expHour = expTime.split(":")[0];
        var expMinute = expTime.split(":")[1];
        var expSecond = expTime.split(":")[2];
        setMonth();
        var endTime = new Date(expYear, expMonth, expDay, expHour, expMinute, expSecond);
        function setClock() {
            var now = new Date();
            var totalTime = endTime;
            var _second = 1000;
            var _minute = _second * 60;
            var _hour = _minute * 60;
            var _day = _hour * 24;
            var distance = totalTime - now;
            if (distance < 0) {
                document.querySelectorAll(".willExpireOnSpan").forEach(element => {
                    element.textContent = "ì¸ì¦ ì‹œê°„ ë§Œë£Œë¨";
                });
                phoneNumVCodeInfo.innerText = "ì‹œê°„ ë§Œë£Œ"
                phoneNumVCodeInfo.setAttribute("style", "background: #ffc107; border-color: #ffc107;")
                id_v_code.readOnly = true;
                phoneNumVCodeCheckBtn.hidden = true;
                phoneNumVCodeCheckBtn.disabled = true;
                resetBtn.hidden = false;
                resetBtn.disabled = false;
                alert("ì¸ì¦ ì‹œê°„ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\nì´ˆê¸°í™” í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                return false;
            }
            var days = Math.floor(distance / _day);
            var hours = Math.floor((distance % _day) / _hour);
            var minutes = Math.floor((distance % _hour) / _minute);
            var seconds = Math.floor((distance % _minute) / _second);
            var days = days.toString();
            var hours = hours.toString();
            var minutes = minutes.toString();
            var seconds = seconds.toString();
            setTimeout(setClock, 1000);
            document.querySelectorAll(".willExpireOnSpan").forEach(element => {
                if (minutes > 0) {
                    element.textContent = `${minutes}ë¶„ ${seconds}ì´ˆ í›„ ë§Œë£Œë¨`;
                } else {
                    element.textContent = `${seconds}ì´ˆ í›„ ë§Œë£Œë¨`;
                }
            });
        }
        setClock();
        function setMonth() {
            expMonth = expMonth - 1;
        }
    }
    // reset
    function init() {
        location.href = "/accounts/social/signup/";
        // call 'spinner (transition)' function
        fadeOut();
        // call 'avoiding duplicate requests (btn disabled)' function
        setTimeout(inProgress, 0);
    }
</script>
{% endblock %}