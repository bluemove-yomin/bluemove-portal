{% extends 'base.html' %}

{% load static %}

{% block meta %}
{% if not "activity_report_id=" in request.get_full_path %}
<meta property="og:url" content="{% url 'draftnapprove:activityreport' %}">
<meta property="og:title" content="ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ì¼ì¼í™œë™ë³´ê³ ì„œ">
<meta property="og:description" content="ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ì¼ì¼í™œë™ë³´ê³ ì„œ">
<meta name="subject" content="ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ì¼ì¼í™œë™ë³´ê³ ì„œ">
<meta name="description" content="ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ì¼ì¼í™œë™ë³´ê³ ì„œ">
{% elif "activity_report_id=" in request.get_full_path %}
{% for activity_report_row in activity_report_list %}
<meta property="og:url"
    content="{% url 'draftnapprove:activityreport' %}?activity_report_id={{ activity_report_row.id }}">
<meta property="og:title" content="ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ì¼ì¼í™œë™ë³´ê³ ì„œ - {{ activity_report_row.title }}">
<meta property="og:description" content="ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ì¼ì¼í™œë™ë³´ê³ ì„œ - {{ activity_report_row.title }}">
<meta name="subject" content="ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ì¼ì¼í™œë™ë³´ê³ ì„œ - {{ activity_report_row.title }}">
<meta name="description" content="ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ì¼ì¼í™œë™ë³´ê³ ì„œ - {{ activity_report_row.title }}">
{% endfor %}
{% endif %}
<meta name="robots" content="noindex,nofollow">
{% endblock %}

{% block title %}
{% if not "activity_report_id=" in request.get_full_path %}
ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ì¼ì¼í™œë™ë³´ê³ ì„œ
{% elif "activity_report_id=" in request.get_full_path %}
{% for activity_report_row in activity_report_list %}
ë¸”ë£¨ë¬´ë¸Œ í¬í„¸ - ì¼ì¼í™œë™ë³´ê³ ì„œ - {{ activity_report_row.title }}
{% endfor %}
{% endif %}
{% endblock %}

{% block breadcrumb %}
<div class="breadcrumb-screen breadcrumb-base breadcrumb-activityreport">
    <div class="d-flex align-items-center breadcrumb-layer">
        <div class="container-lg text-center">
            <h1 class="screenLarge m-0" style="color: #FFFFFF; text-shadow: 1px 1px 5px #212529;">ì¼ì¼í™œë™ë³´ê³ ì„œ</h1>
            <h2 class="screenSmall m-0" style="color: #FFFFFF; text-shadow: 1px 1px 5px #212529;">ì¼ì¼í™œë™ë³´ê³ ì„œ</h2>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<!--
---- inner styles
-->
<style type="text/css">
    @media screen and (min-width: 768px) {
        .sticky-top {
            position: -webkit-sticky;
            position: sticky;
            top: 0;
            background-color: #FFFFFF;
        }
    }

    @media screen and (max-width: 767px) {
        .sticky-top {
            position: unset;
            top: auto;
            background-color: unset;
        }
    }

    .sticky-right {
        position: -webkit-sticky;
        position: sticky;
        top: 157.39px;
    }
</style>

{% if not "activity_report_id=" in request.get_full_path and not write or not "@bluemove.or.kr" in user.email or trashed or wrong_url %}
<!--
---- inner template 01
-->
<!--
---- inner content 01 (search)
-->
<div class="card shadow-hover mb-4">
    <div class="card-body" style="background-color: rgba(0,0,0,.025);">
        <h5 class="card-title pb-1">ì¼ì¼í™œë™ë³´ê³ ì„œ ê²€ìƒ‰</h5>
        <!-- alert -->
        {% if submit %}
        <!-- boolean SUBMIT -->
        <div class="alert alert-primary alert-dismissible fade show d-flex align-items-center" role="alert">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                class="bi bi-file-earmark-check flex-shrink-0 me-2" viewBox="0 0 16 16">
                <path
                    d="M10.854 7.854a.5.5 0 0 0-.708-.708L7.5 9.793 6.354 8.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z" />
                <path
                    d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z" />
            </svg>
            <div class="vertical" style="word-break: break-word;">
                ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤! <span id="emoji"></span>
            </div>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="ì•ˆë‚´ì°½ ë‹«ê¸°"></button>
        </div>
        {% elif trashed %}
        <!-- boolean TRASHED -->
        <div class="alert alert-secondary alert-dismissible fade show d-flex align-items-center" role="alert">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                class="bi bi-emoji-neutral flex-shrink-0 me-2" viewBox="0 0 16 16">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                <path
                    d="M4 10.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5zm3-4C7 5.672 6.552 5 6 5s-1 .672-1 1.5S5.448 8 6 8s1-.672 1-1.5zm4 0c0-.828-.448-1.5-1-1.5s-1 .672-1 1.5S9.448 8 10 8s1-.672 1-1.5z" />
            </svg>
            <div class="vertical">
                ë³´ê³ ì„œê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í…Œí¬ ë§¤ë‹ˆì €ì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.
            </div>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="ì•ˆë‚´ì°½ ë‹«ê¸°"></button>
        </div>
        {% elif wrong_url %}
        <!-- boolean WRONG_URL -->
        <div class="alert alert-secondary alert-dismissible fade show d-flex align-items-center" role="alert">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                class="bi bi-emoji-neutral flex-shrink-0 me-2" viewBox="0 0 16 16">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                <path
                    d="M4 10.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5zm3-4C7 5.672 6.552 5 6 5s-1 .672-1 1.5S5.448 8 6 8s1-.672 1-1.5zm4 0c0-.828-.448-1.5-1-1.5s-1 .672-1 1.5S9.448 8 10 8s1-.672 1-1.5z" />
            </svg>
            <div class="vertical">
                URLì´ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í˜¹ì‹œ ì˜¤íƒˆìê°€ ìˆë‚˜ìš”?
            </div>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="ì•ˆë‚´ì°½ ë‹«ê¸°"></button>
        </div>
        {% endif %}
        <!-- form -->
        <form action="{% url 'draftnapprove:activityreport' %}" method="GET" onsubmit="validation(this)">
            <div class="input-group">
                <input type="text" class="form-control" id="q" name="q" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”." aria-label="ê²€ìƒ‰ì–´ ì…ë ¥"
                    value="{{ q|default_if_none:'' }}" required>
                <button type="submit" class="btn btn-outline-secondary" aria-label="ê²€ìƒ‰">
                    <i class="bi bi-search me-2"></i>ê²€ìƒ‰</button>
                {% if '?q=' in request.get_full_path %}
                <button type="button" class="btn btn-outline-secondary dropdown-toggle dropdown-toggle-split"
                    data-bs-toggle="dropdown" aria-expanded="false" aria-label="ê²€ìƒ‰ ì˜µì…˜"></button>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item fade-onclick" href="{% url 'draftnapprove:activityreport' %}">ê²€ìƒ‰ ì´ˆê¸°í™”</a>
                    </li>
                </ul>
                {% endif %}
            </div>
        </form>
    </div>
</div>

<!--
---- inner script for content 01 (search)
-->
<script type="text/javascript">
    // validation
    function validation() {
        if (document.querySelector("#q").value.length <= 1) {
            alert("ê²€ìƒ‰ì–´ëŠ” ë‘ ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        };
        // call 'spinner (transition)' function
        fadeOut();
        // call 'avoiding duplicate requests (btn disabled)' function
        setTimeout(inProgress, 0);
    };
</script>

<!--
---- inner content 02 (activity report list)
-->
<!-- content large -->
<table class="table screenLarge m-0">
    <thead>
        <tr class="text-center" style="color: #545859;">
            <th class="pt-0" scope="col">í”„ë¡œì íŠ¸</th>
            <th class="pt-0" scope="col">í™œë™ëª…</th>
            <th class="pt-0" scope="col">ê¸°ì•ˆì¼ì‹œ</th>
            <th class="pt-0" scope="col">ê¸°ì•ˆì</th>
            <th class="pt-0" scope="col">ê²°ì¬ì¼ì‹œ</th>
            <th class="pt-0" scope="col">ê²°ì¬ì</th>
            <th class="pt-0" scope="col">ìƒíƒœ</th>
        </tr>
    </thead>
    <tbody>
        {% for activity_report_row in activity_report_list %}
        <tr class="text-center">
            <!-- í”„ë¡œì íŠ¸ -->
            <th scope="row" style="color: #545859; font-weight: bold;">
                {{ activity_report_row.project }}
            </th>
            <!-- í™œë™ëª… -->
            <td>
                {% if "@bluemove.or.kr" in user.email %}
                <a href="javascript:void(0);"
                    onclick="if ('URLSearchParams' in window) { var searchParams = new URLSearchParams(window.location.search); searchParams.set('activity_report_id', '{{ activity_report_row.id }}'); window.location.search = searchParams.toString(); fadeOut(); setTimeout(inProgress, 0); };"
                    class="a-bluemove">{{ activity_report_row.title }}</a>
                {% else %}
                {{ activity_report_row.title }}
                {% endif %}
            </td>
            <!-- ê¸°ì•ˆì¼ì‹œ -->
            <td>
                {{ activity_report_row.drafter_datetime }}
            </td>
            <!-- ê¸°ì•ˆì -->
            <td>
                {{ activity_report_row.drafter }}
            </td>
            <!-- ê²°ì¬ì¼ì‹œ -->
            <td>
                {{ activity_report_row.approver_datetime }}
            </td>
            <!-- ê²°ì¬ì -->
            <td>
                {{ activity_report_row.approver }}
            </td>
            <!-- ìƒíƒœ -->
            <td style="color: #0077C8;">
                {% if "ëŒ€ê¸°" in activity_report_row.status %}
                <span class="badge badge-bluemove bg-secondary">ëŒ€ê¸°</span>
                {% elif "ë°˜ë ¤" in activity_report_row.status %}
                <span class="badge badge-bluemove bg-danger">ë°˜ë ¤</span>
                {% elif "ìŠ¹ì¸" in activity_report_row.status %}
                <span class="badge badge-bluemove bg-bluemove">ìŠ¹ì¸</span>
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="7">
                <div class="text-center my-4">
                    <h2 class="mb-2" style="color: rgba(0,0,0,.25); font-weight: bolder;"><i
                            class="bi bi-tornado me-2"></i>íœ‘...</h2>
                    <p class="text-muted m-0">
                        {% if "?q=" in request.get_full_path %}
                        ë¶ˆëŸ¬ì˜¬ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. í˜¹ì‹œ ì˜¤íƒˆìê°€ ìˆë‚˜ìš”?
                        {% else %}
                        ë“±ë¡ëœ ì¼ì¼í™œë™ë³´ê³ ì„œê°€ ì—†ìŠµë‹ˆë‹¤.
                        {% endif %}
                    </p>
                </div>
            </td>
        </tr>
        {% endfor %}
        {% if "@bluemove.or.kr" in user.email and not "?q=" in request.get_full_path %}
        <tr>
            <td class="p-0" colspan="7" onmouseover="bgColorIn(this);" onmouseout="bgColorOut(this);">
                <div class="text-center">
                    <div class="card border-0" style="padding: 8px; background-color: transparent;">
                        <form action="{% url 'draftnapprove:activityreport' %}" method="POST"
                            enctype="multipart/form-data" class="formActivityReportWrite">
                            {% csrf_token %}
                            <input type="hidden" id="cmdPost" name="cmdPost" value="write" readonly hidden>
                            <p class="text-muted m-0">
                                <a href="javascript:void(0);" class="a-dark-bluemove stretched-link"
                                    onclick="activityReportWrite();">
                                    <i class="bi bi-plus me-1"></i>ì—¬ê¸°ë¥¼ ëˆŒëŸ¬ ì‘ì„±í•˜ì„¸ìš”.
                                </a>
                            </p>
                        </form>
                    </div>
                </div>
            </td>
        </tr>
        {% endif %}
    </tbody>
</table>
<!-- content small -->
<div class="screenSmall">
    <ul class="list-group list-group-flush">
        {% for activity_report_row in activity_report_list %}
        <li class="list-group-item px-0">
            <div class="d-flex justify-content-between align-items-center mb-1">
                <!-- í”„ë¡œì íŠ¸ -->
                <small class="m-0 vertical" style="color: #545859; font-weight: bold;">
                    {{ activity_report_row.project }}
                </small>
                <!-- ìƒíƒœ -->
                <small>
                    {% if "ëŒ€ê¸°" in activity_report_row.status %}
                    <span class="badge badge-bluemove bg-secondary">ëŒ€ê¸°</span>
                    {% elif "ë°˜ë ¤" in activity_report_row.status %}
                    <span class="badge badge-bluemove bg-danger">ë°˜ë ¤</span>
                    {% elif "ìŠ¹ì¸" in activity_report_row.status %}
                    <span class="badge badge-bluemove bg-bluemove">ìŠ¹ì¸</span>
                    {% endif %}
                </small>
            </div>
            <!-- í™œë™ëª… -->
            <h5>
                {% if "@bluemove.or.kr" in user.email %}
                <a href="javascript:void(0);"
                    onclick="if ('URLSearchParams' in window) { var searchParams = new URLSearchParams(window.location.search); searchParams.set('activity_report_id', '{{ activity_report_row.id }}'); window.location.search = searchParams.toString(); fadeOut(); setTimeout(inProgress, 0); };"
                    class="a-bluemove stretched-link">{{ activity_report_row.title }}</a>
                {% else %}
                {{ activity_report_row.title }}
                {% endif %}
            </h5>
            <div class="d-flex justify-content-between align-items-center">
                <!-- ê¸°ì•ˆì¼ì‹œ -->
                <small aria-label="ê¸°ì•ˆì¼ì‹œ">
                    {{ activity_report_row.drafter_datetime }}
                </small>
                <!-- ê¸°ì•ˆì -->
                <small aria-label="ê¸°ì•ˆì">
                    {{ activity_report_row.drafter }} ê¸°ì•ˆ
                </small>
            </div>
            <div class="d-flex justify-content-between align-items-center">
                <!-- ê²°ì¬ì¼ì‹œ -->
                <small aria-label="ê²°ì¬ì¼ì‹œ">
                    {{ activity_report_row.approver_datetime }}
                </small>
                <!-- ê²°ì¬ì -->
                <small aria-label="ê²°ì¬ì">
                    {{ activity_report_row.approver }} ê²°ì¬
                    {% if activity_report_row.approver_datetime == "-" %}
                    ì˜ˆì •
                    {% endif %}
                </small>
            </div>
        </li>
        {% empty %}
        <li class="list-group-item text-center px-0">
            <h2 class="mb-2" style="color: rgba(0,0,0,.25); font-weight: bolder;"><i class="bi bi-tornado me-2"></i>íœ‘...
            </h2>
            <p class="text-muted m-0">
                {% if '?q=' in request.get_full_path %}
                ë¶ˆëŸ¬ì˜¬ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.<br>í˜¹ì‹œ ì˜¤íƒˆìê°€ ìˆë‚˜ìš”?
                {% else %}
                ë“±ë¡ëœ ì¼ì¼í™œë™ë³´ê³ ì„œê°€ ì—†ìŠµë‹ˆë‹¤.
                {% endif %}
            </p>
        </li>
        {% endfor %}
        {% if "@bluemove.or.kr" in user.email and not "?q=" in request.get_full_path %}
        <li class="list-group-item text-center px-0" onmouseover="bgColorIn(this);" onmouseout="bgColorOut(this);">
            <form action="{% url 'draftnapprove:activityreport' %}" method="POST" enctype="multipart/form-data"
                class="formActivityReportWrite">
                {% csrf_token %}
                <input type="hidden" id="cmdPost" name="cmdPost" value="write" readonly hidden>
                <p class="text-muted m-0 vertical">
                    <a href="javascript:void(0);" class="a-dark-bluemove stretched-link"
                        onclick="activityReportWrite();">
                        <i class="bi bi-plus me-1"></i>ì—¬ê¸°ë¥¼ ëˆŒëŸ¬ ì‘ì„±í•˜ì„¸ìš”.
                    </a>
                </p>
            </form>
        </li>
        {% endif %}
    </ul>
</div>

<!--
---- inner script for content 02 (activity report list)
-->
<script type="text/javascript">
    function bgColorIn(obj) {
        obj.setAttribute("style", "padding: 8px; background-color: rgba(0,0,0,.025);");
    }
    function bgColorOut(obj) {
        obj.setAttribute("style", "padding: 8px; background-color: transparent;")
    }
    function activityReportWrite() {
        for (var i = 0; i < document.querySelectorAll(".formActivityReportWrite").length; i++) {
            document.querySelectorAll(".formActivityReportWrite")[i].submit();
            // call 'spinner (transition)' function
            fadeOut();
            // call 'avoiding duplicate requests (btn disabled)' function
            setTimeout(inProgress, 0);
        }
    }
</script>

<!--
---- inner content 03 (paginator)
-->
{% if '?q=' in request.get_full_path %}
{% if bluemover_list.has_other_pages %}
<!-- when searching -->
<div class="mt-4 p-0">
    <nav aria-label="í˜ì´ì§€ ë‚´ë¹„ê²Œì´í„°" style="background-color: transparent;">
        <!-- content large -->
        <div class="screenLarge">
            <ul class="pagination justify-content-center m-0">
                {% if bluemover_list.has_previous %}
                <li class="page-item">
                    <a class="page-link fade-onclick" href="{{ request.path }}?q={{ q }}&page=1">ë§¨ ì•</a>
                </li>
                {% endif %}
                {% for i in bluemover_list.paginator.page_range %}
                {% if bluemover_list.number == i %}
                <li class="page-item active" aria-current="page">
                    <span class="page-link">{{ i }}</span>
                </li>
                {% elif i > bluemover_list.number|add:'-7' and bluemover_list.number|add:'7' > i %}
                <li class="page-item">
                    <a class="page-link fade-onclick" href="{{ request.path }}?q={{ q }}&page={{ i }}">{{ i }}</a>
                </li>
                {% endif %}
                {% endfor %}
                {% if bluemover_list.has_next %}
                <li class="page-item">
                    <a class="page-link fade-onclick"
                        href="{{ request.path }}?q={{ q }}&page={{ bluemover_list.paginator.num_pages }}">ë§¨ ë’¤</a>
                </li>
                {% endif %}
            </ul>
        </div>
        <!-- content small -->
        <div class="screenSmall">
            <ul class="pagination justify-content-center m-0">
                {% if bluemover_list.has_previous %}
                <li class="page-item">
                    <a class="page-link fade-onclick" href="{{ request.path }}?q={{ q }}&page=1">ë§¨ ì•</a>
                </li>
                {% endif %}
                {% for i in bluemover_list.paginator.page_range %}
                {% if bluemover_list.number == i %}
                <li class="page-item active" aria-current="page">
                    <span class="page-link">{{ i }}</span>
                </li>
                {% elif i > bluemover_list.number|add:'-3' and bluemover_list.number|add:'3' > i %}
                <li class="page-item">
                    <a class="page-link fade-onclick" href="{{ request.path }}?q={{ q }}&page={{ i }}">{{ i }}</a>
                </li>
                {% endif %}
                {% endfor %}
                {% if bluemover_list.has_next %}
                <li class="page-item">
                    <a class="page-link fade-onclick"
                        href="{{ request.path }}?q={{ q }}&page={{ bluemover_list.paginator.num_pages }}">ë§¨ ë’¤</a>
                </li>
                {% endif %}
            </ul>
        </div>
    </nav>
</div>
{% endif %}
{% else %}
{% if bluemover_list.has_other_pages %}
<!-- when not searching (default) -->
<div class="mt-4 p-0">
    <nav aria-label="í˜ì´ì§€ ë‚´ë¹„ê²Œì´í„°" style="background-color: transparent;">
        <!-- content large -->
        <div class="screenLarge">
            <ul class="pagination justify-content-center m-0">
                {% if bluemover_list.has_previous %}
                <li class="page-item">
                    <a class="page-link fade-onclick" href="?page=1">ë§¨ ì•</a>
                </li>
                {% endif %}
                {% for i in bluemover_list.paginator.page_range %}
                {% if bluemover_list.number == i %}
                <li class="page-item active" aria-current="page">
                    <span class="page-link">{{ i }}</span>
                </li>
                {% elif i > bluemover_list.number|add:'-7' and bluemover_list.number|add:'7' > i %}
                <li class="page-item">
                    <a class="page-link fade-onclick" href="?page={{ i }}">{{ i }}</a>
                </li>
                {% endif %}
                {% endfor %}
                {% if bluemover_list.has_next %}
                <li class="page-item">
                    <a class="page-link fade-onclick" href="?page={{ bluemover_list.paginator.num_pages }}">ë§¨ ë’¤</a>
                </li>
                {% endif %}
            </ul>
        </div>
        <!-- content small -->
        <div class="screenSmall">
            <ul class="pagination justify-content-center m-0">
                {% if bluemover_list.has_previous %}
                <li class="page-item">
                    <a class="page-link fade-onclick" href="?page=1">ë§¨ ì•</a>
                </li>
                {% endif %}
                {% for i in bluemover_list.paginator.page_range %}
                {% if bluemover_list.number == i %}
                <li class="page-item active" aria-current="page">
                    <span class="page-link">{{ i }}</span>
                </li>
                {% elif i > bluemover_list.number|add:'-3' and bluemover_list.number|add:'3' > i %}
                <li class="page-item">
                    <a class="page-link fade-onclick" href="?page={{ i }}">{{ i }}</a>
                </li>
                {% endif %}
                {% endfor %}
                {% if bluemover_list.has_next %}
                <li class="page-item">
                    <a class="page-link fade-onclick" href="?page={{ bluemover_list.paginator.num_pages }}">ë§¨ ë’¤</a>
                </li>
                {% endif %}
            </ul>
        </div>
    </nav>
</div>
{% endif %}
{% endif %}

{% elif not "activity_report_id=" in request.get_full_path and write and "@bluemove.or.kr" in user.email %}
<!--
---- inner template 02
-->
<!--
---- inner content 04 (activity report form)
-->
<div class="card shadow-hover">
    <div class="card-body" style="background-color: rgba(0,0,0,.025);">
        <h5 class="card-title pb-1">ì¼ì¼í™œë™ë³´ê³ ì„œ ì‘ì„±</h5>
        <!-- form -->
        <form action="{% url 'draftnapprove:activityreport' %}" method="POST" enctype="multipart/form-data"
            id="formActivityReport" onsubmit="activityReportSubmit()">
            {% csrf_token %}
            <input type="hidden" id="cmdPost" name="cmdPost" value="" readonly hidden>
            <div id="formActivityReportCreate">
                <div class="row row-cols-1 row-cols-md-2 g-3" style="margin-bottom: 1rem;">
                    <div class="col">
                        <label for="activityReportProject" class="form-label">ì†Œì† í”„ë¡œì íŠ¸</label>
                        <select class="form-select" id="activityReportProject" name="activityReportProject"
                            aria-label="ì†Œì† í”„ë¡œì íŠ¸ ì„ íƒ" required>
                            <option selected hidden>ì†Œì† í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”.</option>
                            <option disabled>ì†Œì† í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”.</option>
                            {% for project_name, project_approver, project_approver_email, project_folder_url, project_url in project_list %}
                            <option
                                value="{{ project_name }}#{{ project_approver }}#{{ project_approver_email }}#{{ project_folder_url }}#{{ project_url }}">
                                {{ project_name }} ({{ project_approver }})</option>
                            {% empty %}
                            <option disabled>ì§„í–‰ ì¤‘ì¸ í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col">
                        <label for="activityReportTitle" class="form-label">í™œë™ëª…
                            <a href="#none" class="ms-1" data-bs-toggle="tooltip" data-bs-placement="right" title=""
                                data-bs-original-title="ê³µë°± í¬í•¨ 30ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤." style="color: #545859 !important;"
                                aria-label="ë„ì›€ë§">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                    class="bi bi-question-circle" viewBox="0 0 16 16" style="margin-bottom: .2rem;">
                                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                                    <path
                                        d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z" />
                                </svg>
                            </a>
                        </label>
                        <input type="text" class="form-control" id="activityReportTitle" name="activityReportTitle"
                            placeholder="í™œë™ëª…ì„ ì…ë ¥í•˜ì„¸ìš”." aria-label="í™œë™ëª… ì…ë ¥" maxlength="30" required>
                    </div>
                    <div class="col">
                        <label for="activityReportDate" class="form-label">í™œë™ ì—°ì›”ì¼</label>
                        <input type="text" class="form-control" id="activityReportDate" name="activityReportDate"
                            placeholder="í™œë™ ì—°ì›”ì¼ 8ìë¦¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”." aria-label="í™œë™ ì—°ì›”ì¼ 8ìë¦¬ ì…ë ¥" minlength="10" maxlength="10"
                            onkeypress="onlyNumbers(event)" required>
                    </div>
                    <div class="col">
                        <div class="d-flex justify-content-start">
                            <label for="activityReportTimeStart" class="form-label">í™œë™ ì‹œê°„
                                <a href="#none" class="ms-1" data-bs-toggle="tooltip" data-bs-placement="right" title=""
                                    data-bs-original-title="'HH:MM' í˜•íƒœì— ë§ì¶° 24ì‹œê°„ì œë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”."
                                    style="color: #545859 !important;" aria-label="ë„ì›€ë§">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-question-circle" viewBox="0 0 16 16" style="margin-bottom: .2rem;">
                                        <path
                                            d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                                        <path
                                            d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z" />
                                    </svg>
                                </a>
                            </label>
                        </div>
                        <div class="input-group">
                            <input type="text" class="form-control" id="activityReportTimeStart"
                                name="activityReportTimeStart" placeholder="ì‹œì‘ ì‹œê°ì„ ì…ë ¥í•˜ì„¸ìš”." aria-label="í™œë™ ì‹œì‘ ì‹œê° 4ìë¦¬ ì…ë ¥"
                                minlength="5" maxlength="5" onkeypress="onlyNumbers(event)" required>
                            <span class="input-group-text">~</span>
                            <input type="text" class="form-control" id="activityReportTimeEnd"
                                name="activityReportTimeEnd" placeholder="ì¢…ë£Œ ì‹œê°ì„ ì…ë ¥í•˜ì„¸ìš”." aria-label="í™œë™ ì¢…ë£Œ ì‹œê° 4ìë¦¬ ì…ë ¥"
                                minlength="5" maxlength="5" onkeypress="onlyNumbers(event)" required>
                            <input type="hidden" id="activityReportDuration" name="activityReportDuration" value=""
                                readonly required hidden>
                            <span class="input-group-text" id="activityReportDurationInfo">0.0ì‹œê°„</span>
                        </div>
                    </div>
                    <div class="col">
                        <div class="d-flex justify-content-between">
                            <label for="activityReportAddress" class="form-label">í™œë™ ì¥ì†Œ</label>
                            <div class="form-check form-switch">
                                <label class="form-check-label" for="activityReportAddressOnline">ë¹„ëŒ€ë©´</label>
                                <input class="form-check-input" type="checkbox" id="activityReportAddressOnline"
                                    value="false" onclick="activityReportAddressCheck();">
                            </div>
                        </div>
                        <div class="input-group" id="activityReportAddressInputGroup">
                            <input type="text" class="form-control" id="activityReportAddress"
                                name="activityReportAddress" placeholder="ì£¼ì†Œë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”." aria-label="ì˜¤ë¥¸ìª½ 'ì£¼ì†Œ ê²€ìƒ‰' ë²„íŠ¼ í´ë¦­"
                                readonly required>
                            <input type="button" class="btn btn-outline-secondary" id="activityReportAddressBtn"
                                onclick="activityReportExecDaumPostcode();" value="ì£¼ì†Œ ê²€ìƒ‰">
                        </div>
                    </div>
                    <div class="col">
                        <label for="activityReportDrafter" class="form-label">ê¸°ì•ˆì</label>
                        <input type="text" class="form-control" id="activityReportDrafter" name="activityReportDrafter"
                            aria-label="ê¸°ì•ˆì ìë™ ì…ë ¥" value="{{ user.last_name }}{{ user.first_name }}" readonly required>
                    </div>
                </div>
                <div class="row row-cols-1 g-3">
                    <div class="col">
                        <label for="activityReportContent" class="form-label">í™œë™ ë‚´ìš©
                            <a href="#none" class="ms-1" data-bs-toggle="tooltip" data-bs-placement="right" title=""
                                data-bs-original-title="ì£¼ìš” ì‹œê°„ëŒ€ë³„ë¡œ ë‚˜ëˆ„ì–´ ì…ë ¥í•´ì£¼ì„¸ìš”." style="color: #545859 !important;"
                                aria-label="ë„ì›€ë§">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                    class="bi bi-question-circle" viewBox="0 0 16 16" style="margin-bottom: .2rem;">
                                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                                    <path
                                        d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z" />
                                </svg>
                            </a>
                        </label>
                        <textarea class="form-control" id="activityReportContent" name="activityReportContent"
                            aria-label="ì‹œê°„ëŒ€ë³„ í™œë™ ë‚´ìš© ì…ë ¥" rows="3"
                            required>00:00~00:00 í™œë™ ë‚´ìš© ê°„ëµíˆ ì…ë ¥&#13;&#10;00:00~00:00 í™œë™ ë‚´ìš© ê°„ëµíˆ ì…ë ¥&#13;&#10;00:00~00:00 í™œë™ ë‚´ìš© ê°„ëµíˆ ì…ë ¥</textarea>
                    </div>
                    <div class="col">
                        <div class="row row-cols-1 row-cols-md-3 g-3">
                            <div class="col">
                                <label class="form-label">í™œë™ ì‚¬ì§„
                                    <a href="#none" class="ms-1" data-bs-toggle="tooltip" data-bs-placement="right"
                                        title="" data-bs-original-title="ì°¸ê°€ì ì „ì›ì˜ ì–¼êµ´ì´ ë‚˜ì˜¨ ë‹¨ì²´ ì‚¬ì§„ì„ í¬í•¨í•´ì£¼ì„¸ìš”."
                                        style="color: #545859 !important;" aria-label="ë„ì›€ë§">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                            fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16"
                                            style="margin-bottom: .2rem;">
                                            <path
                                                d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                                            <path
                                                d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z" />
                                        </svg>
                                    </a>
                                </label>
                                <div class="card" id="activityReportImageOneCard"
                                    style="background-color: transparent; border-style: dashed; border-color: rgba(0,0,0,.25)">
                                    <div class="card-body">
                                        <div class="text-center my-4">
                                            <h2 style="color: rgba(0,0,0,.25); font-weight: bolder;"><i
                                                    class="bi bi-image me-2"></i>ë‹¨ì²´ ì‚¬ì§„ ì²¨ë¶€
                                            </h2>
                                            <p class="text-muted m-0">
                                                <a href="javascript:void(0);" class="a-dark-bluemove stretched-link"
                                                    aria-label="Google Driveì—ì„œ ë‹¨ì²´ ì‚¬ì§„ ì„ íƒ" onclick="attachImage(this);">
                                                    <span>ì—¬ê¸°ë¥¼ ëˆŒëŸ¬ ì²¨ë¶€í•˜ì„¸ìš”.</span>
                                                </a>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <input type="hidden" id="activityReportImageOneId" name="activityReportImageOneId"
                                    value="" readonly required hidden>
                            </div>
                            <div class="col">
                                <label class="form-label screenLarge" style="visibility: hidden;">í™œë™ ì‚¬ì§„</label>
                                <div class="card" id="activityReportImageTwoCard"
                                    style="background-color: transparent; border-style: dashed; border-color: rgba(0,0,0,.25)">
                                    <div class="card-body">
                                        <div class="text-center my-4">
                                            <h2 style="color: rgba(0,0,0,.25); font-weight: bolder;"><i
                                                    class="bi bi-image me-2"></i>í™œë™ ì‚¬ì§„ ì²¨ë¶€
                                            </h2>
                                            <p class="text-muted m-0">
                                                <a href="javascript:void(0);" class="a-dark-bluemove stretched-link"
                                                    aria-label="Google Driveì—ì„œ í™œë™ ì‚¬ì§„ ì„ íƒ" onclick="attachImage(this);">
                                                    <span>ì—¬ê¸°ë¥¼ ëˆŒëŸ¬ ì²¨ë¶€í•˜ì„¸ìš”.</span>
                                                </a>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <input type="hidden" id="activityReportImageTwoId" name="activityReportImageTwoId"
                                    value="" readonly required hidden>
                            </div>
                            <div class="col">
                                <label class="form-label screenLarge" style="visibility: hidden;">í™œë™ ì‚¬ì§„</label>
                                <div class="card" id="activityReportImageThreeCard"
                                    style="background-color: transparent; border-style: dashed; border-color: rgba(0,0,0,.25)">
                                    <div class="card-body">
                                        <div class="text-center my-4">
                                            <h2 style="color: rgba(0,0,0,.25); font-weight: bolder;"><i
                                                    class="bi bi-image me-2"></i>í™œë™ ì‚¬ì§„ ì²¨ë¶€
                                            </h2>
                                            <p class="text-muted m-0">
                                                <a href="javascript:void(0);" class="a-dark-bluemove stretched-link"
                                                    aria-label="Google Driveì—ì„œ í™œë™ ì‚¬ì§„ ì„ íƒ" onclick="attachImage(this);">
                                                    <span>ì—¬ê¸°ë¥¼ ëˆŒëŸ¬ ì²¨ë¶€í•˜ì„¸ìš”.</span>
                                                </a>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <input type="hidden" id="activityReportImageThreeId" name="activityReportImageThreeId"
                                    value="" readonly required hidden>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="screenLarge">
                            <div class="d-flex justify-content-between">
                                <label for="activityReportParticipant" class="form-label">ì°¸ê°€ì</label>
                                <small style="margin-top: .125rem;"><i class="bi bi-person me-1"></i><span
                                        class="activityReportParticipantAddedLength" aria-label="ì°¸ê°€ìë¡œ ì¶”ê°€ëœ ì¸ì›ìˆ˜">1ëª… ì¶”ê°€ë¨ /
                                        15ëª…ê¹Œì§€ ì¶”ê°€ ê°€ëŠ¥</span></small>
                            </div>
                        </div>
                        <div class="screenSmall">
                            <label for="activityReportParticipant" class="form-label">ì°¸ê°€ì</label>
                            <small class="d-flex justify-content-center border border-secondary rounded-1"
                                style="border-color: rgba(0,0,0,.3) !important; margin-bottom: .8rem;"><i
                                    class="bi bi-person me-1"></i><span class="activityReportParticipantAddedLength"
                                    aria-label="ì°¸ê°€ìë¡œ ì¶”ê°€ëœ ì¸ì›ìˆ˜">1ëª… ì¶”ê°€ë¨ /
                                    15ëª…ê¹Œì§€ ì¶”ê°€ ê°€ëŠ¥</span>
                            </small>
                        </div>
                        <select class="form-select" id="activityReportParticipant" name="activityReportParticipant"
                            aria-label="ì¶”ê°€ ê°€ëŠ¥í•œ ì¸ì›" size="5" multiple>
                            <option disabled>ì¶”ê°€ ê°€ëŠ¥í•œ ì¸ì›</option>
                            {% for participant_name, participant_org_unit, participant_number, participant_email in bluemover_list %}
                            <option value="{{ participant_name }}#{{ participant_number }}#{{ participant_email }}">
                                {% if "ì´ì‚¬íšŒ" in participant_org_unit %}
                                {{ participant_name }} ğŸŒŠ ì´ì‚¬íšŒ {{ participant_email }}
                                {% elif "ì‚¬ë¬´êµ­" in participant_org_unit %}
                                {{ participant_name }} ğŸ³ ì‚¬ë¬´êµ­ {{ participant_email }}
                                {% elif "êµìœ¡íŒ€" in participant_org_unit %}
                                {{ participant_name }} ğŸ‘©â€ğŸ« êµìœ¡íŒ€ {{ participant_email }}
                                {% elif "ì½˜í…ì¸ íŒ€" in participant_org_unit %}
                                {{ participant_name }} ğŸ§ ì½˜í…ì¸ íŒ€ {{ participant_email }}
                                {% endif %}
                            </option>
                            {% empty %}
                            <option disabled>ë¸”ë£¨ë¬´ë²„ ëª…ë‹¨ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col text-center">
                        <button type="button" class="btn btn-outline-secondary btn-sm me-2"
                            id="activityReportParticipantBtnAdd" aria-label="ì°¸ê°€ì ì¶”ê°€"><i
                                class="bi bi-arrow-down me-2"></i>ì¶”ê°€</button>
                        <button type="button" class="btn btn-outline-danger btn-sm"
                            id="activityReportParticipantBtnRemove" aria-label="ì°¸ê°€ì ì œê±°"><i
                                class="bi bi-arrow-up me-2"></i>ì œê±°</button>
                    </div>
                    <div class="col">
                        <select class="form-select" id="activityReportParticipantAdded"
                            name="activityReportParticipantAdded" aria-label="ì°¸ê°€ìë¡œ ì¶”ê°€ëœ ì¸ì›" size="5" multiple>
                            <option disabled>ì°¸ê°€ìë¡œ ì¶”ê°€ëœ ì¸ì›</option>
                            {% for participant_name, participant_org_unit, participant_number, participant_email in bluemover_list_self %}
                            <option value="{{ participant_name }}#{{ participant_number }}#{{ participant_email }}"
                                disabled>
                                {% if "ì´ì‚¬íšŒ" in participant_org_unit %}
                                {{ participant_name }} ğŸŒŠ ì´ì‚¬íšŒ {{ participant_email }} (ë‚˜)
                                {% elif "ì‚¬ë¬´êµ­" in participant_org_unit %}
                                {{ participant_name }} ğŸ³ ì‚¬ë¬´êµ­ {{ participant_email }} (ë‚˜)
                                {% elif "êµìœ¡íŒ€" in participant_org_unit %}
                                {{ participant_name }} ğŸ‘©â€ğŸ« êµìœ¡íŒ€ {{ participant_email }} (ë‚˜)
                                {% elif "ì½˜í…ì¸ íŒ€" in participant_org_unit %}
                                {{ participant_name }} ğŸ§ ì½˜í…ì¸ íŒ€ {{ participant_email }} (ë‚˜)
                                {% endif %}
                            </option>
                            {% empty %}
                            <option disabled>{{ user.last_name }}{{ user.first_name }}ë‹˜ì˜ ë¸”ë£¨ë¬´ë²„ ê³„ì • ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
                            </option>
                            {% endfor %}
                        </select>
                        {% for participant_name, participant_org_unit, participant_number, participant_email in bluemover_list_self %}
                        <input type="hidden" id="activityReportParticipantAddedNameNumberEmail"
                            name="activityReportParticipantAddedNameNumberEmail"
                            value="{{ participant_name }}#{{ participant_number }}#{{ participant_email }}" readonly
                            required hidden>
                        {% empty %}
                        <input type="hidden" id="activityReportParticipantAddedNameNumberEmail"
                            name="activityReportParticipantAddedNameNumberEmail" value="" readonly required hidden>
                        {% endfor %}
                    </div>
                </div>
                <div class="row g-3" style="padding-top: 1.25rem !important;">
                    <div class="col-md-9 col-lg-10">
                        <div class="d-grid">
                            <button type="button" class="btn btn-outline-secondary" aria-label="ì¼ì¼í™œë™ë³´ê³ ì„œ ì œì¶œ"
                                onclick="activityReportSubmit();">
                                <i class="bi bi-file-earmark-text me-2"></i>ì¼ì¼í™œë™ë³´ê³ ì„œ ì œì¶œ</button>
                        </div>
                    </div>
                    <div class="col-md-3 col-lg-2">
                        <div class="d-grid">
                            <button type="button" class="btn btn-outline-danger" aria-label="ì¼ì¼í™œë™ë³´ê³ ì„œ ì‘ì„± ì·¨ì†Œ"
                                onclick="activityReportCancel();">
                                <i class="bi bi-arrow-counterclockwise me-2"></i>ì‘ì„± ì·¨ì†Œ</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<!--
---- inner script for content 04 (activity report form)
-->
<!-- Daum Postcode API (https://postcode.map.daum.net) -->
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<!-- Google Picker API (https://developers.google.com/picker) -->
<script type="text/javascript" src="https://apis.google.com/js/api.js"></script>
<script type="text/javascript">
    // activityReportAddressOnline
    function activityReportAddressCheck() {
        var activityReportAddressOnline = document.querySelector("#activityReportAddressOnline");
        var activityReportAddressInputGroup = document.querySelector("#activityReportAddressInputGroup");
        var activityReportAddress = document.querySelector("#activityReportAddress");
        if (activityReportAddressOnline.value == "false") {
            activityReportAddressOnline.value = "true";
            activityReportAddressOnline.checked = true;
            activityReportAddress.value = "ì˜¨ë¼ì¸";
            activityReportAddressBtn.parentNode.removeChild(activityReportAddressBtn);
        } else {
            activityReportAddressOnline.value = "false";
            activityReportAddressOnline.checked = false;
            activityReportAddress.value = "";
            var $input = document.createElement("input");
            $input.type = "button";
            $input.className = "btn btn-outline-secondary";
            $input.id = "activityReportAddressBtn";
            $input.setAttribute("onclick", "activityReportExecDaumPostcode();");
            $input.value = "ì£¼ì†Œ ê²€ìƒ‰";
            activityReportAddressInputGroup.appendChild($input);
        }
    }
    // Daum Postcode API
    function activityReportExecDaumPostcode() {
        var themeObj = {
            postcodeTextColor: "#0077C8"
        };
        new daum.Postcode({
            oncomplete: function (data) {
                var addr = "";
                addr = data.roadAddress;
                document.getElementById("activityReportAddress").value = addr;
            },
            theme: themeObj
        }).open();
    }
    // Google Picker API
    var developerKey = "AIzaSyBu3xu6qtpDNhSGpeCR0KlR5rVSMUhhzsQ";
    var clientId = "576834225714-p62qagbh82s81bbgbjg7cas0afr09mn8.apps.googleusercontent.com"
    var appId = "576834225714";
    var scope = ["https://www.googleapis.com/auth/drive.file"];
    var pickerApiLoaded = false;
    var oauthToken;
    var activityReportImageOneCard = document.querySelector("#activityReportImageOneCard");
    var activityReportImageTwoCard = document.querySelector("#activityReportImageTwoCard");
    var activityReportImageThreeCard = document.querySelector("#activityReportImageThreeCard");
    function attachImage(obj) {
        var activityReportImageParentDivId = obj.offsetParent.id;
        var activityReportImageParentH2Id = obj.parentNode.previousElementSibling;
        var activityReportImageChildSpanId = obj.firstElementChild;
        function loadPicker() {
            if (pickerApiLoaded == true) {
                createPicker();
            } else {
                gapi.load("auth", { "callback": onAuthApiLoad });
                gapi.load("picker", { "callback": onPickerApiLoad });
            }
        }
        function onAuthApiLoad() {
            window.gapi.auth.authorize(
                {
                    "client_id": clientId,
                    "scope": scope,
                    "immediate": false
                },
                handleAuthResult);
        }
        function onPickerApiLoad() {
            pickerApiLoaded = true;
            createPicker();
        }
        function handleAuthResult(authResult) {
            if (authResult && !authResult.error) {
                oauthToken = authResult.access_token;
                createPicker();
            }
        }
        function createPicker() {
            if (pickerApiLoaded && oauthToken) {
                var view = new google.picker.View(google.picker.ViewId.DOCS_IMAGES);
                view.setMimeTypes("image/png,image/jpeg,image/jpg");
                var picker = new google.picker.PickerBuilder()
                    .enableFeature(google.picker.Feature.NAV_HIDDEN)
                    .enableFeature(google.picker.Feature.SIMPLE_UPLOAD_ENABLED)
                    .enableFeature(google.picker.Feature.SUPPORT_DRIVES)
                    .setAppId(appId)
                    .setOAuthToken(oauthToken)
                    .addView(view)
                    .addView(new google.picker.DocsUploadView())
                    .setTitle("í™œë™ ì‚¬ì§„ì„ ì„ íƒí•˜ì„¸ìš”.")
                    .setSelectableMimeTypes("image/png,image/jpeg,image/jpg")
                    .setLocale("ko")
                    .setDeveloperKey(developerKey)
                    .setCallback(pickerCallback)
                    .build();
                picker.setVisible(true);
            }
        }
        function pickerCallback(data) {
            if (data.action == google.picker.Action.PICKED) {
                var fileId = data.docs[0].id;
                changeBgImage(fileId);
                inputImageId(fileId);
            }
        }
        function changeBgImage(fileId) {
            styleValue = "background-image: url('https://lh3.googleusercontent.com/d/" + fileId + "=s360'); background-size: cover; background-position: center center; background-color: transparent; border: 1px solid #ced4da;";
            if (activityReportImageParentDivId == activityReportImageOneCard.id) {
                activityReportImageOneCard.setAttribute("style", styleValue);
            } else if (activityReportImageParentDivId == activityReportImageTwoCard.id) {
                activityReportImageTwoCard.setAttribute("style", styleValue);
            } else if (activityReportImageParentDivId == activityReportImageThreeCard.id) {
                activityReportImageThreeCard.setAttribute("style", styleValue);
            }
            activityReportImageParentH2Id.setAttribute("style", "visibility: hidden;");
            activityReportImageChildSpanId.setAttribute("style", "visibility: hidden;");
        }
        function inputImageId(fileId) {
            if (activityReportImageParentDivId == activityReportImageOneCard.id) {
                activityReportImageOneId.value = fileId;
            } else if (activityReportImageParentDivId == activityReportImageTwoCard.id) {
                activityReportImageTwoId.value = fileId;
            } else if (activityReportImageParentDivId == activityReportImageThreeCard.id) {
                activityReportImageThreeId.value = fileId;
            }
        }
        loadPicker();
    }
    // activityReportParticipant
    function activityReportParticipantAddedNameNumberEmailText() {
        var selectedOptionValue = $("#activityReportParticipantAdded option").map(function () { return $(this).val(); }).get().slice(1).sort();
        $("#activityReportParticipantAddedNameNumberEmail").val(selectedOptionValue);
    }
    function activityReportParticipantAddedLengthText(i) {
        $(".activityReportParticipantAddedLength").text(i + "ëª… ì¶”ê°€ë¨ / 15ëª…ê¹Œì§€ ì¶”ê°€ ê°€ëŠ¥");
    }
    $("#activityReportParticipantBtnAdd").click(function () {
        var selectedOption = $("#activityReportParticipant option:selected");
        if (selectedOption.length + $("#activityReportParticipantAdded option").length - 1 > 15) {
            alert("ì°¸ê°€ìëŠ” ìµœëŒ€ 15ëª…ê¹Œì§€ ì¶”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
        } else {
            $("#activityReportParticipantAdded").append(selectedOption);
            activityReportParticipantAddedNameNumberEmailText();
            activityReportParticipantAddedLengthText($("#activityReportParticipantAdded option").length - 1);
        }
    });
    $("#activityReportParticipantBtnRemove").click(function () {
        var selectedOption = $("#activityReportParticipantAdded option:selected");
        $("#activityReportParticipant").append(selectedOption);
        activityReportParticipantAddedNameNumberEmailText();
        activityReportParticipantAddedLengthText($("#activityReportParticipantAdded option").length - 1);
    });
    $("#activityReportParticipant").dblclick(function () {
        var selectedOption = $("#activityReportParticipant option:selected");
        if (selectedOption.length + $("#activityReportParticipantAdded option").length - 1 > 15) {
            alert("ì°¸ê°€ìëŠ” ìµœëŒ€ 15ëª…ê¹Œì§€ ì¶”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
        } else {
            $("#activityReportParticipantAdded").append(selectedOption);
            activityReportParticipantAddedNameNumberEmailText();
            activityReportParticipantAddedLengthText($("#activityReportParticipantAdded option").length - 1);
        }
    });
    $("#activityReportParticipantAdded").dblclick(function () {
        var selectedOption = $("#activityReportParticipantAdded option:selected");
        $("#activityReportParticipant").append(selectedOption);
        activityReportParticipantAddedNameNumberEmailText();
        activityReportParticipantAddedLengthText($("#activityReportParticipantAdded option").length - 1);
    });
    $("#activityReportParticipant").on("keyup", function (key) {
        if (key.keyCode == 13) {
            var selectedOption = $("#activityReportParticipant option:selected");
            if (selectedOption.length + $("#activityReportParticipantAdded option").length - 1 > 15) {
                alert("ì°¸ê°€ìëŠ” ìµœëŒ€ 15ëª…ê¹Œì§€ ì¶”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
            } else {
                $("#activityReportParticipantAdded").append(selectedOption);
                activityReportParticipantAddedNameNumberEmailText();
                activityReportParticipantAddedLengthText($("#activityReportParticipantAdded option").length - 1);
            }
        }
    });
    $("#activityReportParticipantAdded").on("keyup", function (key) {
        if (key.keyCode == 13 || key.keyCode == 8 || key.keyCode == 46) {
            var selectedOption = $("#activityReportParticipantAdded option:selected");
            $("#activityReportParticipant").append(selectedOption);
            activityReportParticipantAddedNameNumberEmailText();
            activityReportParticipantAddedLengthText($("#activityReportParticipantAdded option").length - 1);
        }
    });
    // validation
    var patternNum = /[0-9]/; // number
    var patternKorAndNum = /^[ã„±-ã…|ê°€-í£|0-9|\s]+$/; // Hangul and number
    var project = document.querySelector("#activityReportProject");
    var title = document.querySelector("#activityReportTitle");
    var date = document.querySelector("#activityReportDate");
    var timeStart = document.querySelector("#activityReportTimeStart");
    var timeEnd = document.querySelector("#activityReportTimeEnd");
    var durationInfo = document.querySelector("#activityReportDurationInfo");
    var duration = document.querySelector("#activityReportDuration");
    var address = document.querySelector("#activityReportAddress");
    var content = document.querySelector("#activityReportContent");
    var participantAdded = document.querySelector("#activityReportParticipantAdded");
    $("#activityReportDate").keyup(function () {
        var foo = $(this).val().replace(/[^0-9]/g, "").replace(/(^20[0-9]{2})([0-9]+)?([0-9]{2})$/, "$1-$2-$3").replace("--", "-");
        $(this).val(foo);
    });
    $("#activityReportTimeStart").keyup(function () {
        var foo = $(this).val().replace(/[^0-9]/g, "");
        if (foo.length > 0) {
            foo = foo.match(new RegExp(".{1,2}", "g")).join(":");
        }
        $(this).val(foo);
    });
    $("#activityReportTimeEnd").keyup(function () {
        var foo = $(this).val().replace(/[^0-9]/g, "");
        if (foo.length > 0) {
            foo = foo.match(new RegExp(".{1,2}", "g")).join(":");
        }
        $(this).val(foo);
    });
    function onlyNumbers(e) {
        var regInt = /[^0-9]/gi;
        var inputKeyChar = String.fromCharCode(event.keyCode);
        if (regInt.test(inputKeyChar)) {
            event.returnValue = false;
        }
    };
    function activityReportDurationInfoCalc(e) {
        var timeStartHours = Math.round((Number(timeStart.value.split(":")[0]) + timeStart.value.split(":")[1] / 60) * 10) / 10;
        var timeEndHours = Math.round((Number(timeEnd.value.split(":")[0]) + timeEnd.value.split(":")[1] / 60) * 10) / 10;
        var booleanKeyCode = [9, 16, 37, 38, 39, 40, 116].indexOf(e.keyCode) == -1;
        if ((timeStart.value.indexOf(":") == 2 && timeEnd.value.indexOf(":") == 2) &&
            (timeStart.value.length == 5 && timeEnd.value.length == 5)) {
            if (timeStart.value.split(":")[0] >= 24 ||
                timeEnd.value.split(":")[0] > 24 ||
                (timeEnd.value.split(":")[0] == 24 && timeEnd.value.split(":")[1] != 00) ||
                timeStart.value.split(":")[1] >= 60 ||
                timeEnd.value.split(":")[1] >= 60 ||
                timeEndHours == timeStartHours ||
                timeEndHours < timeStartHours) {
                if (booleanKeyCode == true) {
                    alert("ì˜¬ë°”ë¥¸ í™œë™ ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                }
                durationInfo.setAttribute("style", "background: #ffc107; border-color: #ffc107;")
                return false;
            }
            if (Math.abs(timeEnd.value.split(":")[1] - timeStart.value.split(":")[1]) != 0 && Math.abs(timeEnd.value.split(":")[1] - timeStart.value.split(":")[1]) != 30) {
                if (booleanKeyCode == true) {
                    alert("í™œë™ ì‹œê°„ì€ 30ë¶„ ê°„ê²©ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                }
                durationInfo.setAttribute("style", "background: #ffc107; border-color: #ffc107;")
                return false;
            }
            if (timeEndHours - timeStartHours > 8) {
                if (booleanKeyCode == true) {
                    alert("í™œë™ ì‹œê°„ì€ 8ì‹œê°„ì„ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                }
                durationInfo.setAttribute("style", "background: #ffc107; border-color: #ffc107;")
                return false;
            }
            if (timeEndHours > timeStartHours) {
                durationInfo.setAttribute("style", "background: #0077C8; border-color: #0077C8; color: #FFFFFF;")
                if (String(timeEndHours - timeStartHours).indexOf(".") != 1) {
                    durationInfo.innerText = timeEndHours - timeStartHours + ".0ì‹œê°„";
                    duration.value = timeEndHours - timeStartHours + ".0ì‹œê°„";
                } else {
                    durationInfo.innerText = timeEndHours - timeStartHours + "ì‹œê°„";
                    duration.value = timeEndHours - timeStartHours + "ì‹œê°„";
                }
            }
        } else {
            durationInfo.innerText = "0.0ì‹œê°„";
            durationInfo.setAttribute("style", "")
            duration.value = "";
            return false;
        }
    };
    timeStart.addEventListener("keyup", activityReportDurationInfoCalc);
    timeEnd.addEventListener("keyup", activityReportDurationInfoCalc);
    function activityReportSubmit() {
        if (project.value == "ì†Œì† í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”.") {
            alert("ì†Œì† í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (title.value == "") {
            alert("í™œë™ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (title.value.length <= 4) {
            alert("í™œë™ëª…ì€ ë‹¤ì„¯ ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (title.value.length > 30) {
            alert("í™œë™ëª…ì€ ê³µë°± í¬í•¨ ìµœëŒ€ 30ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
            return false;
        }
        if (!patternKorAndNum.test(title.value)) {
            alert("í™œë™ëª…ì€ í•œê¸€ ë° ìˆ«ìë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (date.value == "") {
            alert("í™œë™ ì—°ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (!patternNum.test(date.value)) {
            alert("í™œë™ ì—°ì›”ì¼ì€ ìˆ«ìë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (date.value.length !== 10) {
            alert("ì˜¬ë°”ë¥¸ í™œë™ ì—°ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (date.value.indexOf("20") !== 0) {
            alert("ì˜¬ë°”ë¥¸ í™œë™ ì—°ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (date.value.indexOf("-") !== 4 &&
            date.value.lastIndexOf("-") !== 7) {
            alert("ì˜¬ë°”ë¥¸ í™œë™ ì—°ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (Number(date.value.slice(5, 7)) == 0 ||
            Number(date.value.slice(5, 7)) > 12 ||
            Number(date.value.slice(8, 10)) == 0 ||
            Number(date.value.slice(8, 10)) > 31) {
            alert("ì˜¬ë°”ë¥¸ í™œë™ ì—°ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (date.value.slice(5, 10) == "02-30" ||
            date.value.slice(5, 10) == "02-31" ||
            date.value.slice(5, 10) == "04-31" ||
            date.value.slice(5, 10) == "06-31" ||
            date.value.slice(5, 10) == "09-31" ||
            date.value.slice(5, 10) == "11-31") {
            alert("ì˜¬ë°”ë¥¸ í™œë™ ì—°ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (new Date(date.value).setHours(0, 0, 0, 0) > new Date().setHours(0, 0, 0, 0)) {
            alert("í™œë™ ì—°ì›”ì¼ì€ í˜„ì¬ ë˜ëŠ” ê³¼ê±°ì˜ ë‚ ì§œë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (timeStart.value == "") {
            alert("í™œë™ ì‹œì‘ ì‹œê°ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (timeEnd.value == "") {
            alert("í™œë™ ì¢…ë£Œ ì‹œê°ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (durationInfo.innerText == "0.0ì‹œê°„") {
            alert("ì˜¬ë°”ë¥¸ í™œë™ ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (address.value == "") {
            alert("í™œë™ ì¥ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (content.value == "") {
            alert("í™œë™ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (activityReportImageOneId.value == "") {
            alert("ë‹¨ì²´ ì‚¬ì§„ì„ ì²¨ë¶€í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (activityReportImageTwoId.value == "") {
            alert("í™œë™ ì‚¬ì§„ì„ ì²¨ë¶€í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (activityReportImageThreeId.value == "") {
            alert("í™œë™ ì‚¬ì§„ì„ ì²¨ë¶€í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (activityReportImageOneId.value == activityReportImageTwoId.value) {
            alert("ì²« ë²ˆì§¸ì™€ ë‘ ë²ˆì§¸ í™œë™ ì‚¬ì§„ì´ ì¤‘ë³µë©ë‹ˆë‹¤.\nì„œë¡œ ë‹¤ë¥¸ ì‚¬ì§„ì„ ì²¨ë¶€í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (activityReportImageOneId.value == activityReportImageThreeId.value) {
            alert("ì²« ë²ˆì§¸ì™€ ì„¸ ë²ˆì§¸ í™œë™ ì‚¬ì§„ì´ ì¤‘ë³µë©ë‹ˆë‹¤.\nì„œë¡œ ë‹¤ë¥¸ ì‚¬ì§„ì„ ì²¨ë¶€í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (activityReportImageTwoId.value == activityReportImageThreeId.value) {
            alert("ë‘ ë²ˆì§¸ì™€ ì„¸ ë²ˆì§¸ í™œë™ ì‚¬ì§„ì´ ì¤‘ë³µë©ë‹ˆë‹¤.\nì„œë¡œ ë‹¤ë¥¸ ì‚¬ì§„ì„ ì²¨ë¶€í•´ì£¼ì„¸ìš”.");
            return false;
        }
        if (participantAdded.options.length == 2) {
            if (confirm("ì°¸ê°€ìë¡œ ì¶”ê°€ëœ ì¸ì›ì´ {{ user.last_name }}{{ user.first_name }}ë‹˜ í•œ ëª…ë¿ì…ë‹ˆë‹¤.\në§ë‹¤ë©´ 'í™•ì¸'ì„ í´ë¦­í•´ì£¼ì„¸ìš”.") == false) {
                return false;
            }
        }
        if (confirm("ì•„ë˜ ë‚´ìš©ì„ ìµœì¢… í™•ì¸í•´ì£¼ì„¸ìš”.\nâœ”ï¸ í™œë™ ë‚´ìš©ì„ ì£¼ìš” ì‹œê°„ëŒ€ë³„ë¡œ ë‚˜ëˆ„ì–´ ì…ë ¥í•˜ì…¨ë‚˜ìš”?\nâœ”ï¸ ì°¸ê°€ìë¥¼ ë¹ ì§ì—†ì´ ëª¨ë‘ ì¶”ê°€í•˜ì…¨ë‚˜ìš”?\n\nì •ë§ ì¼ì¼í™œë™ë³´ê³ ì„œë¥¼ ì œì¶œí•˜ì‹œê² ì–´ìš”?")) {
            cmdPost.value = "submit";
            formActivityReport.submit();
            // call 'spinner (transition)' function
            fadeOut();
            // call 'avoiding duplicate requests (btn disabled)' function
            setTimeout(inProgress, 0);
        } else {
            return false;
        }
    }
    // activityReportCancel
    function activityReportCancel() {
        if (confirm("ì •ë§ ì¼ì¼í™œë™ë³´ê³ ì„œ ì‘ì„±ì„ ì·¨ì†Œí•˜ì‹œê² ì–´ìš”?")) {
            location.href = location.protocol + "//" + location.host + location.pathname;
            // call 'spinner (transition)' function
            fadeOut();
            // call 'avoiding duplicate requests (btn disabled)' function
            setTimeout(inProgress, 0);
        }
    }
</script>

{% elif "activity_report_id=" in request.get_full_path and "@bluemove.or.kr" in user.email %}
<!--
---- inner template 03
-->
<!--
---- inner content 05 (activity report details)
-->
<div class="row">
    <!-- column top -->
    <div class="col-md-12 sticky-top" style="padding-top: 32px;">
        {% for activity_report_row in activity_report_list %}
        <p class="mb-1">{{ activity_report_row.project }}</p>
        <h2 class="mb-2"
            style="word-break: break-word; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical;">
            {{ activity_report_row.title }}
        </h2>
        <div class="screenLarge">
            <div class="d-flex justify-content-between">
                <p class="vertical m-0">
                    {% if activity_report_row.approver_datetime != "-" %}
                    {{ activity_report_row.drafter_datetime }} {{ activity_report_row.drafter }}
                    ê¸°ì•ˆâ”‚{{ activity_report_row.approver_datetime }} {{ activity_report_row.approver }} ê²°ì¬
                    {% elif activity_report_row.approver_datetime == "-" %}
                    {{ activity_report_row.drafter_datetime }} {{ activity_report_row.drafter }}
                    ê¸°ì•ˆâ”‚{{ activity_report_row.approver }} ê²°ì¬ ì˜ˆì •
                    {% endif %}
                </p>
                <p class="mb-0" style="margin-top: .1rem;">
                    {% if "ëŒ€ê¸°" in activity_report_row.status %}
                    <span class="badge badge-bluemove bg-secondary">ëŒ€ê¸°</span>
                    {% elif "ë°˜ë ¤" in activity_report_row.status %}
                    <span class="badge badge-bluemove bg-danger">ë°˜ë ¤</span>
                    {% elif "ìŠ¹ì¸" in activity_report_row.status %}
                    <span class="badge badge-bluemove bg-bluemove">ìŠ¹ì¸</span>
                    {% endif %}
                </p>
            </div>
        </div>
        <div class="screenSmall">
            <div class="d-flex justify-content-between">
                <small>
                    {{ activity_report_row.drafter_datetime }}
                </small>
                <small>
                    {{ activity_report_row.drafter }} ê¸°ì•ˆ
                </small>
            </div>
            <div class="d-flex justify-content-between">
                <small>
                    {{ activity_report_row.approver_datetime }}
                </small>
                <small>
                    {{ activity_report_row.approver }} ê²°ì¬
                    {% if activity_report_row.approver_datetime == "-" %}
                    ì˜ˆì •
                    {% endif %}
                </small>
            </div>
            <small class="d-grid align-items-stretch mt-2">
                {% if "ëŒ€ê¸°" in activity_report_row.status %}
                <span class="badge badge-bluemove bg-secondary">ëŒ€ê¸°</span>
                {% elif "ë°˜ë ¤" in activity_report_row.status %}
                <span class="badge badge-bluemove bg-danger">ë°˜ë ¤</span>
                {% elif "ìŠ¹ì¸" in activity_report_row.status %}
                <span class="badge badge-bluemove bg-bluemove">ìŠ¹ì¸</span>
                {% endif %}
            </small>
        </div>
        <hr class="text-black-50" style="margin-top: 1.5rem; margin-bottom: 0;">
        {% endfor %}
    </div>
    <!-- column left -->
    <div class="col-md-8">
        <div class="screenLarge" style="margin-bottom: 1.9rem;"></div>
        <div class="screenSmall" style="margin-bottom: 1.5rem;"></div>
        <div class="screenSmall mb-4">
            {% for activity_report_row in activity_report_list %}
            {% if user.email|lower in activity_report_row.approver_email and "ëŒ€ê¸°" in activity_report_row.status %}
            <div class="d-grid" style="margin-bottom: 1rem;">
                <a href="javascript:void(0);" class="btn btn-outline-primary" onclick="activityReportApprove();"
                    aria-label="ë³´ê³ ì„œ ìŠ¹ì¸"><i class="bi bi-check2-square me-2"></i>ë³´ê³ ì„œ ìŠ¹ì¸</a>
            </div>
            {% endif %}
            {% endfor %}
        </div>
        <!-- alert -->
        {% if approve %}
        <!-- boolean APPROVE -->
        <div class="alert alert-primary alert-dismissible fade show d-flex align-items-center" role="alert">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                class="bi bi-file-earmark-check flex-shrink-0 me-2" viewBox="0 0 16 16">
                <path
                    d="M10.854 7.854a.5.5 0 0 0-.708-.708L7.5 9.793 6.354 8.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z" />
                <path
                    d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z" />
            </svg>
            <div class="vertical" style="word-break: break-word;">
                ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤! <span id="emoji"></span>
            </div>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="ì•ˆë‚´ì°½ ë‹«ê¸°"></button>
        </div>
        {% elif reject %}
        <!-- boolean REJECT -->
        <div class="alert alert-primary alert-dismissible fade show d-flex align-items-center" role="alert">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                class="bi bi-file-earmark-check flex-shrink-0 me-2" viewBox="0 0 16 16">
                <path
                    d="M10.854 7.854a.5.5 0 0 0-.708-.708L7.5 9.793 6.354 8.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z" />
                <path
                    d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z" />
            </svg>
            <div class="vertical" style="word-break: break-word;">
                ë°˜ë ¤ë˜ì—ˆìŠµë‹ˆë‹¤! <span id="emoji"></span>
            </div>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="ì•ˆë‚´ì°½ ë‹«ê¸°"></button>
        </div>
        {% endif %}
        {% for activity_report_row in activity_report_list %}
        {% if activity_report_row.rejection_reason != "-" %}
        <div class="alert alert-danger d-flex align-items-center" role="alert">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                class="bi bi-pin-angle flex-shrink-0 me-2" viewBox="0 0 16 16">
                <path
                    d="M9.828.722a.5.5 0 0 1 .354.146l4.95 4.95a.5.5 0 0 1 0 .707c-.48.48-1.072.588-1.503.588-.177 0-.335-.018-.46-.039l-3.134 3.134a5.927 5.927 0 0 1 .16 1.013c.046.702-.032 1.687-.72 2.375a.5.5 0 0 1-.707 0l-2.829-2.828-3.182 3.182c-.195.195-1.219.902-1.414.707-.195-.195.512-1.22.707-1.414l3.182-3.182-2.828-2.829a.5.5 0 0 1 0-.707c.688-.688 1.673-.767 2.375-.72a5.922 5.922 0 0 1 1.013.16l3.134-3.133a2.772 2.772 0 0 1-.04-.461c0-.43.108-1.022.589-1.503a.5.5 0 0 1 .353-.146zm.122 2.112v-.002.002zm0-.002v.002a.5.5 0 0 1-.122.51L6.293 6.878a.5.5 0 0 1-.511.12H5.78l-.014-.004a4.507 4.507 0 0 0-.288-.076 4.922 4.922 0 0 0-.765-.116c-.422-.028-.836.008-1.175.15l5.51 5.509c.141-.34.177-.753.149-1.175a4.924 4.924 0 0 0-.192-1.054l-.004-.013v-.001a.5.5 0 0 1 .12-.512l3.536-3.535a.5.5 0 0 1 .532-.115l.096.022c.087.017.208.034.344.034.114 0 .23-.011.343-.04L9.927 2.028c-.029.113-.04.23-.04.343a1.779 1.779 0 0 0 .062.46z" />
            </svg>
            <div class="vertical" style="word-break: break-word;">
                <strong>ë°˜ë ¤ ì‚¬ìœ </strong>: {{ activity_report_row.rejection_reason }}
            </div>
        </div>
        {% endif %}
        {% endfor %}
        <div class="alert alert-secondary d-flex align-items-center mb-4" role="alert">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                class="bi bi-shield-lock flex-shrink-0 me-2" viewBox="0 0 16 16">
                <path
                    d="M5.338 1.59a61.44 61.44 0 0 0-2.837.856.481.481 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.725 10.725 0 0 0 2.287 2.233c.346.244.652.42.893.533.12.057.218.095.293.118a.55.55 0 0 0 .101.025.615.615 0 0 0 .1-.025c.076-.023.174-.061.294-.118.24-.113.547-.29.893-.533a10.726 10.726 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.775 11.775 0 0 1-2.517 2.453 7.159 7.159 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7.158 7.158 0 0 1-1.048-.625 11.777 11.777 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 62.456 62.456 0 0 1 5.072.56z" />
                <path
                    d="M9.5 6.5a1.5 1.5 0 0 1-1 1.415l.385 1.99a.5.5 0 0 1-.491.595h-.788a.5.5 0 0 1-.49-.595l.384-1.99a1.5 1.5 0 1 1 2-1.415z" />
            </svg>
            <div class="vertical" style="word-break: break-word;">
                í™œë™ ì‚¬ì§„ ë° ì°¸ê°€ì ê°œì¸ì •ë³´ê°€ ìœ ì¶œë˜ì§€ ì•Šë„ë¡ ê°ë³„í•œ ìœ ì˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤.
            </div>
        </div>
        {% for activity_report_row in activity_report_list %}
        <div class="card shadow-hover mb-4">
            <div class="card-body" style="background-color: rgba(0,0,0,.025);">
                <h5 class="card-title pb-1">í™œë™ ê°œìš”</h5>
                <div class="pt-3" style="border-radius: .25rem;">
                    <div class="row row-cols-1 row-cols-sm-2 g-4">
                        <div class="col">
                            <div class="card border-0" style="background-color: transparent;">
                                <div class="card-body p-0">
                                    <p class="card-title" style="margin-top: .1rem;"><span
                                            class="badge badge-bluemove bg-secondary">ì†Œì† í”„ë¡œì íŠ¸</span></p>
                                    <p class="card-text">{{ activity_report_row.project }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card border-0" style="background-color: transparent;">
                                <div class="card-body p-0">
                                    <p class="card-title" style="margin-top: .1rem;"><span
                                            class="badge badge-bluemove bg-secondary">í™œë™ëª…</span></p>
                                    <p class="card-text">{{ activity_report_row.title }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card border-0" style="background-color: transparent;">
                                <div class="card-body p-0">
                                    <p class="card-title" style="margin-top: .1rem;"><span
                                            class="badge badge-bluemove bg-secondary">í™œë™ ì—°ì›”ì¼</span></p>
                                    <p class="card-text">{{ activity_report_row.date }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card border-0" style="background-color: transparent;">
                                <div class="card-body p-0">
                                    <p class="card-title" style="margin-top: .1rem;"><span
                                            class="badge badge-bluemove bg-secondary">í™œë™ ì‹œê°„</span></p>
                                    <p class="card-text">{{ activity_report_row.time_duration }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card border-0" style="background-color: transparent;">
                                <div class="card-body p-0">
                                    <p class="card-title" style="margin-top: .1rem;"><span
                                            class="badge badge-bluemove bg-secondary">í™œë™ ì¥ì†Œ</span></p>
                                    <p class="card-text">{{ activity_report_row.address }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card border-0" style="background-color: transparent;">
                                <div class="card-body p-0">
                                    <p class="card-title" style="margin-top: .1rem;"><span
                                            class="badge badge-bluemove bg-secondary">ê¸°ì•ˆì ë° ê²°ì¬ì</span></p>
                                    <p class="card-text">{{ activity_report_row.drafter }} /
                                        {{ activity_report_row.approver }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row row-cols-1 g-4" style="padding-top: 1.5rem;">
                        <div class="col">
                            <div class="card border-0" style="background-color: transparent;">
                                <div class="card-body p-0">
                                    <p class="card-title" style="margin-top: .1rem;"><span
                                            class="badge badge-bluemove bg-secondary">í™œë™ ë‚´ìš©</span></p>
                                    <p class="card-text">{{ activity_report_row.content|linebreaksbr }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card border-0" style="background-color: transparent;">
                                <div class="card-body p-0">
                                    <p class="card-title" style="margin-top: .1rem;"><span
                                            class="badge badge-bluemove bg-secondary">ë‹¨ì²´ ì‚¬ì§„</span></p>
                                    <img src="https://lh3.googleusercontent.com/d/{{ activity_report_row.image_one_id }}"
                                        style="width: 100%; border-radius: .25rem; margin-top: .4rem;" alt="ë‹¨ì²´ ì‚¬ì§„">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card shadow-hover mb-4">
            <div class="card-body" style="background-color: rgba(0,0,0,.025);">
                <h5 class="card-title pb-1">í™œë™ ì‚¬ì§„</h5>
                <div class="pt-3" style="border-radius: .25rem;">
                    <div class="row row-cols-1 row-cols-sm-2 g-4">
                        <div class="col">
                            <div class="card border-0" style="background-color: transparent;">
                                <div class="card-body p-0">
                                    <p class="card-title" style="margin-top: .1rem;">
                                        <img src="https://lh3.googleusercontent.com/d/{{ activity_report_row.image_two_id }}"
                                            style="width: 100%; border-radius: .25rem;" alt="ì²« ë²ˆì§¸ í™œë™ ì‚¬ì§„">
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card border-0" style="background-color: transparent;">
                                <div class="card-body p-0">
                                    <p class="card-title" style="margin-top: .1rem;">
                                        <img src="https://lh3.googleusercontent.com/d/{{ activity_report_row.image_three_id }}"
                                            style="width: 100%; border-radius: .25rem;" alt="ë‘ ë²ˆì§¸ í™œë™ ì‚¬ì§„">
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card shadow-hover">
            <div class="card-body px-0" style="background-color: rgba(0,0,0,.025);">
                <div class="screenLarge" style="padding-left: 1.25rem; padding-right: 1.25rem;">
                    <div class="d-flex justify-content-between">
                        <h5 class="card-title pb-1">
                            ì°¸ê°€ì ëª…ë‹¨
                        </h5>
                        <small style="margin-top: .25rem;">
                            <i class="bi bi-person me-1"></i>ì´ {{ activity_report_row.participant|length }}ëª… ì°¸ê°€
                        </small>
                    </div>
                </div>
                <div class="screenSmall" style="padding-left: 1.25rem; padding-right: 1.25rem;">
                    <h5 class="card-title pb-1">
                        ì°¸ê°€ì ëª…ë‹¨
                    </h5>
                    <small class="d-flex justify-content-center border border-secondary rounded-1"
                        style="border-color: rgba(0,0,0,.3) !important;">
                        <i class="bi bi-person me-1"></i>ì´ {{ activity_report_row.participant|length }}ëª… ì°¸ê°€
                    </small>
                </div>
                <div class="pt-3" style="border-radius: .25rem; padding-left: 1.25rem; padding-right: 1.25rem;">
                    <div class="row row-cols-1 row-cols-sm-2 g-4">
                        {% for participant in activity_report_row.participant %}
                        <div class="col">
                            <div class="card p-3" style="background-color: transparent;"
                                onmouseover="onmouseoverParticipant(this)" onmouseout="onmouseoutParticipant(this)">
                                <div class="card-body p-0">
                                    <p class="card-title" style="margin-top: .1rem;"><span
                                            class="badge badge-bluemove bg-secondary">{{ forloop.counter }}.
                                            {{ participant.0 }}</span></p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span>
                                            <i class="bi bi-123 me-2"></i>íšŒë²ˆ
                                        </span>{{ participant.1 }}
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span>
                                            <i class="bi bi-calendar-date me-2"></i>ìƒë…„ì›”ì¼
                                        </span>****-{{ participant.2|slice:"5:" }}
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span>
                                            <i class="bi bi-telephone me-2"></i>ì—°ë½ì²˜
                                        </span>{{ participant.3|slice:":8" }}-****
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="text-end mt-2" style="padding-left: 1.25rem; padding-right: 1.25rem;">
                    <small>ê°œì¸ì •ë³´ ì¼ë¶€ ë§ˆìŠ¤í‚¹ë¨</small>
                </div>
            </div>
        </div>
        {% endfor %}
        <div class="screenSmall mt-4">
            {% for activity_report_row in activity_report_list %}
            {% if user.email|lower in activity_report_row.approver_email and "ëŒ€ê¸°" in activity_report_row.status %}
            <div class="d-grid" style="margin-bottom: 1rem;">
                <a href="javascript:void(0);" class="btn btn-outline-secondary" onclick="openGoogleDocs();"
                    aria-label="ë³´ê³ ì„œ ì›ë³¸ ë³´ê¸°"><i class="bi bi-google me-2"></i>ë³´ê³ ì„œ ì›ë³¸ ë³´ê¸°</a>
            </div>
            <div class="d-grid" style="margin-bottom: 2rem;">
                <a href="{% url 'draftnapprove:activityreport' %}" class="btn btn-outline-secondary fade-onclick"
                    aria-label="ë‹¤ë¥¸ ë³´ê³ ì„œ ë³´ëŸ¬ ëª©ë¡ìœ¼ë¡œ ì´ë™í•˜ê¸°"><i class="bi bi-list-ul me-2"></i>ë‹¤ë¥¸ ë³´ê³ ì„œ ë³´ê¸°</a>
            </div>
            <div class="d-grid" style="margin-bottom: .5rem;">
                <!-- trigger modal -->
                <button type="button" class="btn btn-outline-danger" data-bs-toggle="modal"
                    data-bs-target="#activityReportRejectModal">
                    <i class="bi bi-slash-circle me-2"></i>ë³´ê³ ì„œ ë°˜ë ¤
                </button>
            </div>
            {% else %}
            <div class="d-grid" style="margin-bottom: 1rem;">
                <a href="javascript:void(0);" class="btn btn-outline-secondary" onclick="openGoogleDocs();"
                    aria-label="ë³´ê³ ì„œ ì›ë³¸ ë³´ê¸°"><i class="bi bi-google me-2"></i>ë³´ê³ ì„œ ì›ë³¸ ë³´ê¸°</a>
            </div>
            <div class="d-grid">
                <a href="{% url 'draftnapprove:activityreport' %}" class="btn btn-outline-secondary fade-onclick"
                    aria-label="ë‹¤ë¥¸ ë³´ê³ ì„œ ë³´ëŸ¬ ëª©ë¡ìœ¼ë¡œ ì´ë™í•˜ê¸°"><i class="bi bi-list-ul me-2"></i>ë‹¤ë¥¸ ë³´ê³ ì„œ ë³´ê¸°</a>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
    <!-- column right -->
    <div class="col-md-4">
        <div class="d-grid sticky-right">
            <div class="screenLarge" style="margin-top: 1.9rem;">
                {% for activity_report_row in activity_report_list %}
                {% if user.email|lower in activity_report_row.approver_email and "ëŒ€ê¸°" in activity_report_row.status %}
                <div class="d-grid" style="margin-bottom: 1rem;">
                    <a href="javascript:void(0);" class="btn btn-outline-primary" onclick="activityReportApprove();"
                        aria-label="ë³´ê³ ì„œ ìŠ¹ì¸"><i class="bi bi-check2-square me-2"></i>ë³´ê³ ì„œ ìŠ¹ì¸</a>
                </div>
                <div class="d-grid" style="margin-bottom: 1rem;">
                    <a href="javascript:void(0);" class="btn btn-outline-secondary" onclick="openGoogleDocs();"
                        aria-label="ë³´ê³ ì„œ ì›ë³¸ ë³´ê¸°"><i class="bi bi-google me-2"></i>ë³´ê³ ì„œ ì›ë³¸ ë³´ê¸°</a>
                </div>
                <div class="d-grid" style="margin-bottom: 2rem;">
                    <a href="{% url 'draftnapprove:activityreport' %}" class="btn btn-outline-secondary fade-onclick"
                        aria-label="ë‹¤ë¥¸ ë³´ê³ ì„œ ë³´ëŸ¬ ëª©ë¡ìœ¼ë¡œ ì´ë™í•˜ê¸°"><i class="bi bi-list-ul me-2"></i>ë‹¤ë¥¸ ë³´ê³ ì„œ ë³´ê¸°</a>
                </div>
                <div class="d-grid" style="margin-bottom: .5rem;">
                    <!-- trigger modal -->
                    <button type="button" class="btn btn-outline-danger" data-bs-toggle="modal"
                        data-bs-target="#activityReportRejectModal">
                        <i class="bi bi-slash-circle me-2"></i>ë³´ê³ ì„œ ë°˜ë ¤
                    </button>
                </div>
                {% else %}
                <div class="d-grid" style="margin-bottom: 1rem;">
                    <a href="javascript:void(0);" class="btn btn-outline-secondary" onclick="openGoogleDocs();"
                        aria-label="ë³´ê³ ì„œ ì›ë³¸ ë³´ê¸°"><i class="bi bi-google me-2"></i>ë³´ê³ ì„œ ì›ë³¸ ë³´ê¸°</a>
                </div>
                <div class="d-grid">
                    <a href="{% url 'draftnapprove:activityreport' %}" class="btn btn-outline-secondary fade-onclick"
                        aria-label="ë‹¤ë¥¸ ë³´ê³ ì„œ ë³´ëŸ¬ ëª©ë¡ìœ¼ë¡œ ì´ë™í•˜ê¸°"><i class="bi bi-list-ul me-2"></i>ë‹¤ë¥¸ ë³´ê³ ì„œ ë³´ê¸°</a>
                </div>
                {% endif %}
                {% endfor %}
            </div>
            <div class="card mt-4" style="border-style: dashed; border-color: rgba(0,0,0,.25)">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="card-title m-0 p-0">
                            ê³µìœ 
                        </h5>
                        <div class="d-flex justify-content-center" style="height: 28px;">
                            <a href="javascript:void(0);" data-bs-toggle="tooltip" data-bs-placement="left" title=""
                                data-bs-original-title="í´ë¦½ë³´ë“œì— URL ë³µì‚¬í•˜ê¸°" style="color: #545859 !important;"
                                onclick="copyUrl(this);" aria-label="ë„ì›€ë§">
                                <svg xmlns="http://www.w3.org/2000/svg" height="24" fill="currentColor"
                                    class="bi bi-clipboard" viewBox="0 0 16 16">
                                    <path
                                        d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z" />
                                    <path
                                        d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" height="24" fill="currentColor"
                                    class="bi bi-clipboard-check" viewBox="0 0 16 16" style="display: none;">
                                    <path fill-rule="evenodd"
                                        d="M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z" />
                                    <path
                                        d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z" />
                                    <path
                                        d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z" />
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- modal -->
    <div class="modal fade" id="activityReportRejectModal" data-bs-backdrop="static" data-bs-keyboard="false"
        tabindex="-1" aria-labelledby="activityReportRejectModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="activityReportRejectModalLabel">ë³´ê³ ì„œ ë°˜ë ¤</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <label for="activityReportRejectionReason" class="form-label">ë°˜ë ¤ ì‚¬ìœ 
                        <a href="#none" class="ms-1" data-bs-toggle="tooltip" data-bs-placement="right" title=""
                            data-bs-original-title="ê³µë°± í¬í•¨ 30ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤." style="color: #545859 !important;"
                            aria-label="ë„ì›€ë§">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-question-circle" viewBox="0 0 16 16" style="margin-bottom: .2rem;">
                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                                <path
                                    d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z" />
                            </svg>
                        </a>
                    </label>
                    <input type="text" class="form-control" id="activityReportRejectionReason"
                        name="activityReportRejectionReason" placeholder="ë°˜ë ¤ ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš”." aria-label="ë°˜ë ¤ ì‚¬ìœ  ì…ë ¥"
                        maxlength="30" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">ì·¨ì†Œ</button>
                    <a href="javascript:void(0);" class="btn btn-outline-danger"
                        onclick="activityReportReject();">ë°˜ë ¤</a>

                </div>
            </div>
        </div>
    </div>
    <!-- form -->
    {% for activity_report_row in activity_report_list %}
    {% if user.email|lower in activity_report_row.approver_email and "ëŒ€ê¸°" in activity_report_row.status %}
    <form action="{% url 'draftnapprove:activityreport' %}?activity_report_id={{ activity_report_row.id }}"
        method="POST" enctype="multipart/form-data" id="formActivityReportSubmit">
        {% csrf_token %}
        <input type="hidden" id="activityReportIdPost" name="activityReportIdPost" value="{{ activity_report_row.id }}"
            readonly hidden>
        <input type="hidden" id="cmdPost" name="cmdPost" value="" readonly hidden>
        <input type="hidden" id="activityReportRejectionReasonPost" name="activityReportRejectionReasonPost" readonly
            hidden>
    </form>
    {% endif %}
    {% endfor %}
</div>

<!--
---- inner script for content 04 (activity report details)
-->
<script type="text/javascript">
    // onmouseoverParticipant & onmouseoutParticipant
    function onmouseoverParticipant(obj) {
        obj.setAttribute("style", "background-color: transparent; border: 1px solid #0077C8;");
        obj.childNodes[1].childNodes[1].childNodes[0].setAttribute("class", "badge badge-bluemove bg-bluemove");
    }
    function onmouseoutParticipant(obj) {
        obj.setAttribute("style", "background-color: transparent;");
        obj.childNodes[1].childNodes[1].childNodes[0].setAttribute("class", "badge badge-bluemove bg-secondary");
    }
    // approve the activity report
    function activityReportApprove() {
        if (confirm("ì •ë§ ë³´ê³ ì„œë¥¼ ìŠ¹ì¸í•˜ì‹œê² ì–´ìš”?")) {
            cmdPost.value = "approve";
            formActivityReportSubmit.submit();
            // call 'spinner (transition)' function
            fadeOut();
            // call 'avoiding duplicate requests (btn disabled)' function
            setTimeout(inProgress, 0);
        } else {
            return false;
        }
    }
    // reject the activity report
    $("#activityReportRejectionReason").on("keyup", function (key) {
        if (key.keyCode == 13) {
            activityReportReject();
        }
    });
    function activityReportReject() {
        if (activityReportRejectionReason.value == "") {
            alert("ë°˜ë ¤ ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        } else if (activityReportRejectionReason.value.length < 5) {
            alert("ë°˜ë ¤ ì‚¬ìœ ëŠ” ë‹¤ì„¯ ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        } else if (activityReportRejectionReason.value.length > 30) {
            alert("ë°˜ë ¤ ì‚¬ìœ ëŠ” 30ì ì´ë‚´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        } else if (activityReportRejectionReason.value) {
            if (confirm("ì •ë§ ë³´ê³ ì„œë¥¼ ë°˜ë ¤í•˜ì‹œê² ì–´ìš”?")) {
                cmdPost.value = "reject";
                activityReportRejectionReasonPost.value = activityReportRejectionReason.value
                formActivityReportSubmit.submit();
                document.querySelector(".modal-backdrop").setAttribute("class", "modal-backdrop fade hide");
                // call 'spinner (transition)' function
                fadeOut();
                // call 'avoiding duplicate requests (btn disabled)' function
                setTimeout(inProgress, 0);
            }
        }
    }
    // open original activity report in Google Docs
    function openGoogleDocs() {
        window.open("about:blank").location.href = "https://docs.google.com/document/d/" + location.search.replace("?activity_report_id=", "")
    }
    // copy URL to clipboard
    function copyToClipboard(val) {
        const t = document.createElement("textarea");
        document.body.appendChild(t);
        t.value = val;
        t.select();
        document.execCommand("copy");
        document.body.removeChild(t);
    }
    function copyUrl(obj) {
        copyToClipboard(location.protocol + "//" + location.host + location.pathname + location.search);
        obj.firstElementChild.setAttribute("style", "display: none;");
        obj.lastElementChild.setAttribute("style", "");
    }
</script>
{% endif %}

<!--
---- inner script
-->
<script type="text/javascript">
    history.pushState(null, null, location.href);
    window.onpopstate = function () {
        history.go(1);
    };
</script>
{% if submit or approve %}
<!-- boolean SUBMIT or APPROVE -->
<script type="text/javascript">
    var emoji = new Array("ğŸ˜€", "ğŸ˜", "ğŸ˜ƒ", "ğŸ˜„", "ğŸ˜‰", "ğŸ˜Š", "ğŸ˜", "ğŸ™‚", "ğŸ¤—", "ğŸ¤©", "ğŸ‘", "ğŸ‘", "ğŸ™Œ", "ğŸ™†â€â™€ï¸", "ğŸ™†â€â™‚ï¸", "ğŸ™†");
    function randomItem(e) {
        return e[Math.floor(Math.random() * e.length)];
    }
    document.querySelector("#emoji").innerText = randomItem(emoji);
</script>
{% endif %}
{% endblock %}